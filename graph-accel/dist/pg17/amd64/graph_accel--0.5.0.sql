/* <begin connected objects> */
/*
This file is auto generated by pgrx.

The ordering of items is not stable, it is driven by a dependency graph.
*/
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/generation.rs:25
-- bootstrap

CREATE SCHEMA IF NOT EXISTS graph_accel;

CREATE TABLE graph_accel.generation (
    graph_name  text PRIMARY KEY,
    generation  bigint NOT NULL DEFAULT 1,
    updated_at  timestamptz NOT NULL DEFAULT now()
);

COMMENT ON TABLE graph_accel.generation IS
    'Monotonic generation counter for graph_accel cache invalidation. '
    'Call graph_accel_invalidate(graph_name) after mutating AGE data.';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/degree.rs:5
-- graph_accel_ext::degree::graph_accel_degree
CREATE  FUNCTION "graph_accel_degree"(
	"top_n" INT DEFAULT 100 /* i32 */
) RETURNS TABLE (
	"node_id" bigint,  /* i64 */
	"label" TEXT,  /* alloc::string::String */
	"app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"out_degree" INT,  /* i32 */
	"in_degree" INT,  /* i32 */
	"total_degree" INT  /* i32 */
)
STRICT
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_degree_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/generation.rs:95
-- graph_accel_ext::generation::graph_accel_invalidate
CREATE  FUNCTION "graph_accel_invalidate"(
	"graph_name" TEXT /* alloc::string::String */
) RETURNS bigint /* i64 */
STRICT
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_invalidate_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/load.rs:109
-- graph_accel_ext::load::graph_accel_load
CREATE  FUNCTION "graph_accel_load"(
	"graph_name" TEXT DEFAULT NULL /* core::option::Option<alloc::string::String> */
) RETURNS TABLE (
	"node_count" bigint,  /* i64 */
	"edge_count" bigint,  /* i64 */
	"load_time_ms" double precision  /* f64 */
)
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_load_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/neighborhood.rs:6
-- graph_accel_ext::neighborhood::graph_accel_neighborhood
CREATE  FUNCTION "graph_accel_neighborhood"(
	"start_id" TEXT, /* alloc::string::String */
	"max_depth" INT DEFAULT 3, /* i32 */
	"direction_filter" TEXT DEFAULT 'both', /* alloc::string::String */
	"min_confidence" double precision DEFAULT NULL /* core::option::Option<f64> */
) RETURNS TABLE (
	"node_id" bigint,  /* i64 */
	"label" TEXT,  /* alloc::string::String */
	"app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"distance" INT,  /* i32 */
	"path_types" TEXT[],  /* alloc::vec::Vec<alloc::string::String> */
	"path_directions" TEXT[]  /* alloc::vec::Vec<alloc::string::String> */
)
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_neighborhood_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/path.rs:6
-- graph_accel_ext::path::graph_accel_path
CREATE  FUNCTION "graph_accel_path"(
	"from_id" TEXT, /* alloc::string::String */
	"to_id" TEXT, /* alloc::string::String */
	"max_hops" INT DEFAULT 10, /* i32 */
	"direction_filter" TEXT DEFAULT 'both', /* alloc::string::String */
	"min_confidence" double precision DEFAULT NULL /* core::option::Option<f64> */
) RETURNS TABLE (
	"step" INT,  /* i32 */
	"node_id" bigint,  /* i64 */
	"label" TEXT,  /* alloc::string::String */
	"app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"rel_type" TEXT,  /* core::option::Option<alloc::string::String> */
	"direction" TEXT  /* core::option::Option<alloc::string::String> */
)
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_path_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/path.rs:59
-- graph_accel_ext::path::graph_accel_paths
CREATE  FUNCTION "graph_accel_paths"(
	"from_id" TEXT, /* alloc::string::String */
	"to_id" TEXT, /* alloc::string::String */
	"max_hops" INT DEFAULT 10, /* i32 */
	"max_paths" INT DEFAULT 5, /* i32 */
	"direction_filter" TEXT DEFAULT 'both', /* alloc::string::String */
	"min_confidence" double precision DEFAULT NULL /* core::option::Option<f64> */
) RETURNS TABLE (
	"path_index" INT,  /* i32 */
	"step" INT,  /* i32 */
	"node_id" bigint,  /* i64 */
	"label" TEXT,  /* alloc::string::String */
	"app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"rel_type" TEXT,  /* core::option::Option<alloc::string::String> */
	"direction" TEXT  /* core::option::Option<alloc::string::String> */
)
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_paths_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/status.rs:7
-- graph_accel_ext::status::graph_accel_status
CREATE  FUNCTION "graph_accel_status"() RETURNS TABLE (
	"source_graph" TEXT,  /* core::option::Option<alloc::string::String> */
	"status" TEXT,  /* alloc::string::String */
	"node_count" bigint,  /* i64 */
	"edge_count" bigint,  /* i64 */
	"memory_bytes" bigint,  /* i64 */
	"rel_type_count" INT,  /* i32 */
	"loaded_generation" bigint,  /* i64 */
	"current_generation" bigint,  /* i64 */
	"is_stale" bool  /* bool */
)
STRICT
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_status_wrapper';
/* </end connected objects> */

/* <begin connected objects> */
-- ext/src/subgraph.rs:5
-- graph_accel_ext::subgraph::graph_accel_subgraph
CREATE  FUNCTION "graph_accel_subgraph"(
	"start_id" TEXT, /* alloc::string::String */
	"max_depth" INT DEFAULT 3, /* i32 */
	"direction_filter" TEXT DEFAULT 'both', /* alloc::string::String */
	"min_confidence" double precision DEFAULT NULL /* core::option::Option<f64> */
) RETURNS TABLE (
	"from_id" bigint,  /* i64 */
	"from_label" TEXT,  /* alloc::string::String */
	"from_app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"to_id" bigint,  /* i64 */
	"to_label" TEXT,  /* alloc::string::String */
	"to_app_id" TEXT,  /* core::option::Option<alloc::string::String> */
	"rel_type" TEXT  /* alloc::string::String */
)
LANGUAGE c /* Rust */
AS 'MODULE_PATHNAME', 'graph_accel_subgraph_wrapper';
/* </end connected objects> */

