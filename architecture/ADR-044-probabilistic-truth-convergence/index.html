
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Multi-dimensional knowledge extraction system using Apache AGE">
      
      
        <meta name="author" content="Knowledge Graph System Contributors">
      
      
      
        <link rel="prev" href="../ADR-043-single-node-resource-management/">
      
      
        <link rel="next" href="../ADR-045-046-MIGRATION-PLAN/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution - Knowledge Graph System</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto Mono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/css/graph-theme.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adr-044-probabilistic-truth-convergence-through-contradiction-resolution" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Knowledge Graph System" class="md-header__button md-logo" aria-label="Knowledge Graph System" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.14 0-.26 0-.39.04L17.5 13.8c.45-.45.75-1.09.75-1.8a2.5 2.5 0 0 0-2.5-2.5c-.14 0-.25 0-.4.04L13.74 6.3c.47-.46.76-1.09.76-1.8a2.5 2.5 0 0 0-5 0c0 .7.29 1.34.76 1.79L8.65 9.54c-.15-.04-.26-.04-.4-.04a2.5 2.5 0 0 0-2.5 2.5c0 .71.29 1.34.75 1.79l-1.61 3.25C4.76 17 4.64 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.8c.45-.45.75-1.09.75-1.8 0-.7-.29-1.33-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21a2.5 2.5 0 0 0 1.75 4.29c.13 0 .25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5m-15 3.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m8.5-1c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1M7.25 12c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1M11 4.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m3.75 7.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m4.75 8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Knowledge Graph System
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aaronsb/knowledge-graph-system" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    aaronsb/knowledge-graph-system
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Documentation Index

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../manual/" class="md-tabs__link">
          
  
  
    
  
  Manual

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../ADR-001-multi-tier-agent-access/" class="md-tabs__link">
          
  
  
    
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/DEV_JOURNAL_chunked_ingestion/" class="md-tabs__link">
          
  
  
    
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../testing/INTEGRATION_TEST_NOTES/" class="md-tabs__link">
          
  
  
    
  
  Testing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Knowledge Graph System" class="md-nav__button md-logo" aria-label="Knowledge Graph System" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 17c-.14 0-.26 0-.39.04L17.5 13.8c.45-.45.75-1.09.75-1.8a2.5 2.5 0 0 0-2.5-2.5c-.14 0-.25 0-.4.04L13.74 6.3c.47-.46.76-1.09.76-1.8a2.5 2.5 0 0 0-5 0c0 .7.29 1.34.76 1.79L8.65 9.54c-.15-.04-.26-.04-.4-.04a2.5 2.5 0 0 0-2.5 2.5c0 .71.29 1.34.75 1.79l-1.61 3.25C4.76 17 4.64 17 4.5 17a2.5 2.5 0 0 0 0 5A2.5 2.5 0 0 0 7 19.5c0-.7-.29-1.34-.76-1.79l1.62-3.25c.14.04.26.04.39.04s.25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0A2.5 2.5 0 0 0 12 17c-.13 0-.26 0-.39.04L10 13.8c.45-.45.75-1.09.75-1.8 0-.7-.29-1.33-.75-1.79l1.61-3.25c.13.04.26.04.39.04s.26 0 .39-.04L14 10.21a2.5 2.5 0 0 0 1.75 4.29c.13 0 .25 0 .38-.04l1.63 3.25c-.47.45-.76 1.09-.76 1.79a2.5 2.5 0 0 0 5 0 2.5 2.5 0 0 0-2.5-2.5m-15 3.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m8.5-1c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1M7.25 12c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1M11 4.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m3.75 7.5c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m4.75 8.5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"/></svg>

    </a>
    Knowledge Graph System
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aaronsb/knowledge-graph-system" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    aaronsb/knowledge-graph-system
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation Index
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../manual/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/00-introduction/01-WHAT_AND_WHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is the Knowledge Graph System?
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/01-getting-started/01-QUICKSTART/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/01-getting-started/02-CLI_USAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    kg CLI Usage Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/01-getting-started/03-INGESTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Document Ingestion Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/01-AI_PROVIDERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Provider Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/02-EXTRACTION_CONFIGURATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Extraction Configuration Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/03-EMBEDDING_CONFIGURATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embedding Configuration Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/04-SWITCHING_EXTRACTION_PROVIDERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Switching Extraction Providers - Quick Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/05-LOCAL_INFERENCE_IMPLEMENTATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local LLM Inference Implementation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/02-configuration/06-EXTRACTION_QUALITY_COMPARISON/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Extraction Quality Comparison
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Integration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/03-integration/01-MCP_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCP Server Setup Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/03-integration/02-VOCABULARY_CONSOLIDATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Edge Vocabulary Consolidation Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security & Access
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Security & Access
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/04-security-and-access/01-AUTHENTICATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/04-security-and-access/02-RBAC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RBAC Operations Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/04-security-and-access/03-SECURITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/04-security-and-access/04-PASSWORD_RECOVERY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Password Recovery and Account Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintenance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/05-maintenance/01-BACKUP_RESTORE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup and Restore Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/05-maintenance/02-DATABASE_MIGRATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Migrations Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/01-SCHEMA_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL Schema Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/02-USE_CASES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Cases: Practical Workflows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/03-EXAMPLES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples: Real Queries, Real Results
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/04-github_project_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Project History Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/05-CONCEPTS_AND_TERMINOLOGY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts and Terminology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/06-CONCEPT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concept: Why Knowledge Graphs, Not Just RAG
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/07-ENRICHMENT_JOURNEY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Enrichment Journey: From Empty Graph to Multi-Perspective Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/08-DISTRIBUTED_SHARDING_RESEARCH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Graph Database Sharding: Research and Architectural Patterns
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/09-CYPHER_PATTERNS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced Cypher Query Patterns for Apache AGE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/10-OPENCYPHER_QUERIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    openCypher Query Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../manual/06-reference/11-LLM_EDGE_DISCOVERY_FLOW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Edge Discovery Flow
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-001-multi-tier-agent-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-001: Multi-Tier Agent Access Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-002-node-fitness-scoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-002: Node Fitness Scoring System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-003-semantic-tool-hints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-003: Semantic Tool Hint Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-004-pure-graph-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-004: Pure Graph Design (Library Metaphor)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-005-source-text-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-005: Source Text Tracking and Retrieval
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-006-staging-migration-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-006: Staging and Migration Workflows
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-011-cli-admin-separation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-011: CLI and Admin Tooling Separation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-012-api-server-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-012: API Server Architecture for Scalable Neo4j Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-013-unified-typescript-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-013: Unified TypeScript Client (CLI + MCP Server)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-014-job-approval-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-014: Job Approval Workflow with Pre-Ingestion Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-015-backup-restore-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-015: Backup/Restore Streaming Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-016-apache-age-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-016: Apache AGE Migration (Neo4j Replacement)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-017-sensitive-auth-verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Decision Record: Client-Initiated Token Revocation for Elevated Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-018-server-sent-events-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-018: Server-Sent Events for Real-Time Progress Streaming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-019-type-based-table-formatting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-019: Type-Based Table Formatting System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-020-admin-module-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-020: Admin Module Architecture Pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-021-live-man-switch-ai-safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-021: Live Man Switch - AI Safety for Critical Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-022-semantic-relationship-taxonomy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-022: Semantically Sparse 30-Type Relationship Taxonomy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-023-markdown-structured-content-preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-023: Markdown Structured Content Preprocessing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-024-multi-schema-postgresql-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-024: Multi-Schema PostgreSQL Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-025-dynamic-relationship-vocabulary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-025: Dynamic Relationship Vocabulary Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-026-autonomous-vocabulary-curation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-026: Autonomous Vocabulary Curation and Ontology Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-027-user-management-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-027: User Management API with Lightweight JWT Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-028-dynamic-rbac-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-028: Dynamic Role-Based Access Control (RBAC) System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-029-cli-theory-of-operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-029: CLI Theory of Operation - Hybrid Unix/Domain-Specific Design
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-030-concept-deduplication-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-030: Concept Deduplication Quality Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-031-encrypted-api-key-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-031: Encrypted API Key Storage with Container Secrets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-032-IMPLEMENTATION-NOTES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-032 Implementation Quick Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-032-automatic-edge-vocabulary-expansion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-032: Automatic Edge Vocabulary Expansion with Intelligent Pruning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-033-multimodal-ingestion-configurable-prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-033: Multimodal Image Ingestion with Configurable Prompt System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-034-graph-visualization-query-workbench/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-034: Graph Visualization &amp; Interactive Query Explorers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-035-explorer-methods-uses-capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-035: Explorer Methods, Uses, and Capabilities
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-036-universal-visual-query-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-036: Universal Visual Query Builder
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-037-human-guided-graph-editing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-037: Human-Guided Graph Editing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-038-official-project-apparel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-038: Official Project Apparel Design Specifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-039-local-embedding-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-039: Local Embedding Service with Hybrid Client/Server Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-040-database-schema-migrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-040: Database Schema Migration Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-041-ai-extraction-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-041: AI Extraction Provider Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-042-local-extraction-inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-042: Local LLM Inference for Concept Extraction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-043-single-node-resource-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-043: Single-Node Resource Management for Local Inference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      Context
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-adr-044045046-trio" class="md-nav__link">
    <span class="md-ellipsis">
      The ADR-044/045/046 Trio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-problem-of-contradictory-truth" class="md-nav__link">
    <span class="md-ellipsis">
      The Problem of Contradictory Truth
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#philosophical-grounding-godels-incompleteness-evolutionary-fitness" class="md-nav__link">
    <span class="md-ellipsis">
      Philosophical Grounding: Gödel's Incompleteness &amp; Evolutionary Fitness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connection-to-darwin-godel-machines" class="md-nav__link">
    <span class="md-ellipsis">
      Connection to Darwin-Gödel Machines
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ecological-metaphor-concepts-as-competing-species" class="md-nav__link">
    <span class="md-ellipsis">
      Ecological Metaphor: Concepts as Competing Species
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#information-theoretic-foundations" class="md-nav__link">
    <span class="md-ellipsis">
      Information-Theoretic Foundations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current-system-behavior" class="md-nav__link">
    <span class="md-ellipsis">
      Current System Behavior
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-traditional-approaches-and-why-they-fail" class="md-nav__link">
    <span class="md-ellipsis">
      The Traditional Approaches (And Why They Fail)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#decision" class="md-nav__link">
    <span class="md-ellipsis">
      Decision
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Decision">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implement-query-time-grounding-strength-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Implement Query-Time Grounding Strength Calculation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#refined-approach-embedding-based-edge-semantics-2025-10-25" class="md-nav__link">
    <span class="md-ellipsis">
      Refined Approach: Embedding-Based Edge Semantics (2025-10-25)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mechanism-dynamic-grounding-strength-computation" class="md-nav__link">
    <span class="md-ellipsis">
      Mechanism: Dynamic Grounding Strength Computation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounded-rationality-query-depth-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Bounded Rationality: Query Depth Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bounded Rationality: Query Depth Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-recursive-depth-explosion" class="md-nav__link">
    <span class="md-ellipsis">
      The Recursive Depth Explosion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opencypher-query-depth-rules" class="md-nav__link">
    <span class="md-ellipsis">
      OpenCypher Query Depth Rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complexity-analysis-summary" class="md-nav__link">
    <span class="md-ellipsis">
      Complexity Analysis Summary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#design-decision-depth1-as-pragmatic-optimum" class="md-nav__link">
    <span class="md-ellipsis">
      Design Decision: Depth=1 as Pragmatic Optimum
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-depth2-as-optional-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      Future: Depth=2 as Optional Enhancement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automatic-reversibility-through-continuous-calculation" class="md-nav__link">
    <span class="md-ellipsis">
      Automatic Reversibility Through Continuous Calculation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-detection-metrics-immediate" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 1: Detection &amp; Metrics (Immediate)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-agent-context-generation-optional-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 2: Agent Context Generation (Optional Enhancement)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-performance-optimization-future" class="md-nav__link">
    <span class="md-ellipsis">
      Phase 3: Performance Optimization (Future)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-neo4j-apache-age-actual" class="md-nav__link">
    <span class="md-ellipsis">
      Example 1: Neo4j → Apache AGE (Actual)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-multiple-thresholds-for-different-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Example 2: Multiple Thresholds for Different Use Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-automatic-reversibility-future-architecture-change" class="md-nav__link">
    <span class="md-ellipsis">
      Example 3: Automatic Reversibility - Future Architecture Change
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      Consequences
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#positive" class="md-nav__link">
    <span class="md-ellipsis">
      Positive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#negative" class="md-nav__link">
    <span class="md-ellipsis">
      Negative
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trade-offs" class="md-nav__link">
    <span class="md-ellipsis">
      Trade-offs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives-considered" class="md-nav__link">
    <span class="md-ellipsis">
      Alternatives Considered
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternatives Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-temporal-versioning-rejected" class="md-nav__link">
    <span class="md-ellipsis">
      1. Temporal Versioning (Rejected)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-source-authority-ranking-rejected" class="md-nav__link">
    <span class="md-ellipsis">
      2. Source Authority Ranking (Rejected)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-majority-vote-rejected" class="md-nav__link">
    <span class="md-ellipsis">
      3. Majority Vote (Rejected)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-bayesian-belief-networks-considered" class="md-nav__link">
    <span class="md-ellipsis">
      4. Bayesian Belief Networks (Considered)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-static-irrelevant-marking-rejected" class="md-nav__link">
    <span class="md-ellipsis">
      5. Static IRRELEVANT Marking (Rejected)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      Related Decisions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Future Considerations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-weighted-edge-confidence" class="md-nav__link">
    <span class="md-ellipsis">
      1. Weighted Edge Confidence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-temporal-decay" class="md-nav__link">
    <span class="md-ellipsis">
      2. Temporal Decay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-cross-ontology-contradiction-detection" class="md-nav__link">
    <span class="md-ellipsis">
      3. Cross-Ontology Contradiction Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-contradiction-cascade-visualization" class="md-nav__link">
    <span class="md-ellipsis">
      4. Contradiction Cascade Visualization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-automated-concept-refinement" class="md-nav__link">
    <span class="md-ellipsis">
      5. Automated Concept Refinement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-testing" class="md-nav__link">
    <span class="md-ellipsis">
      Validation &amp; Testing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validation &amp; Testing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      Test Scenarios
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-to-track" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics to Track
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-status" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Status
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-045-046-MIGRATION-PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Plan: ADR-045/046 Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-045-unified-embedding-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-045: Unified Embedding Generation System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-046-grounding-aware-vocabulary-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-046: Grounding-Aware Vocabulary Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-047-probabilistic-vocabulary-categorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-047: Probabilistic Vocabulary Categorization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-048-vocabulary-metadata-as-graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-048: Vocabulary Metadata as First-Class Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-049-llm-determined-relationship-direction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-049: LLM-Determined Relationship Direction Semantics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ARCHITECTURE_DECISIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Decision Records (ADRs)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ARCHITECTURE_OVERVIEW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knowledge Graph System Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CLI_AUTHENTICATION_ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Authentication Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CODE-CHANGES-ANALYSIS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Changes Analysis: ADR-045/046 Implementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DATA_CONTRACT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Contract Pattern: Schema Governance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FUZZY_MATCHING_ANALYSIS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fuzzy Matching Analysis for 30-Type Relationship Taxonomy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PHASE_3_3_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ADR-048 Phase 3.3 Implementation Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PHASE_3_IMPLEMENTATION_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Phase 3 Implementation Plan: Vocabulary as Graph Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../QUERY_SAFETY_BASELINE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query Safety Baseline - Technical Debt
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RECURSIVE_UPSERT_ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knowledge Graph System - Recursive Upsert Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/DEV_JOURNAL_chunked_ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development Journal: Chunked Ingestion System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/LEARNED_KNOWLEDGE_MCP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Learned Knowledge Synthesis - MCP Enhancement Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/pattern-repetition-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pattern Repetition in Growth Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/relationship-semantics-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Relationship Semantics: How Others Do It vs. Our Proposal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/vocabulary-direction-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vocabulary Direction Semantics Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/INTEGRATION_TEST_NOTES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration Test Notes - Working Commands &amp; Observations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/INTEGRATION_TEST_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knowledge Graph System - Integration Test Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/SCHEMA_MIGRATION_TEST_REPORT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL Schema Migration - Functional Test Report
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/TEST_COVERAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test Coverage Areas
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="adr-044-probabilistic-truth-convergence-through-contradiction-resolution">ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution</h1>
<p><strong>Status:</strong> Proposed
<strong>Date:</strong> 2025-10-24 (Updated: 2025-10-25)
<strong>Authors:</strong> System Architecture Team
<strong>Related:</strong> ADR-025 (Dynamic Relationship Vocabulary), ADR-030 (Concept Deduplication), ADR-032 (Confidence Thresholds), <strong>ADR-045 (Unified Embedding Generation - DEPENDENCY)</strong>, ADR-046 (Grounding-Aware Vocabulary Management)</p>
<h2 id="context">Context</h2>
<h3 id="the-adr-044045046-trio">The ADR-044/045/046 Trio</h3>
<p>This ADR is part of a three-part system for truth convergence in the knowledge graph:</p>
<table>
<thead>
<tr>
<th>ADR</th>
<th>Focus</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ADR-044</strong></td>
<td><strong>Theory</strong></td>
<td>Probabilistic truth convergence through grounding strength</td>
</tr>
<tr>
<td><strong>ADR-045</strong></td>
<td><strong>Storage</strong></td>
<td>Unified embedding generation infrastructure</td>
</tr>
<tr>
<td><strong>ADR-046</strong></td>
<td><strong>Management</strong></td>
<td>Vocabulary lifecycle with grounding awareness</td>
</tr>
</tbody>
</table>
<p><strong>Implementation Order:</strong> ADR-045 → ADR-044 → ADR-046</p>
<hr />
<h3 id="the-problem-of-contradictory-truth">The Problem of Contradictory Truth</h3>
<p>During documentation maintenance (2025-10-24), a practical contradiction was discovered in the knowledge graph:</p>
<p><strong>Initial state:</strong>
- Concept: "System uses Neo4j"
- Evidence: Multiple documentation sources, architecture diagrams, code references
- Relationships: SUPPORTS edges from various concepts</p>
<p><strong>New information:</strong>
- Concept: "System uses Apache AGE + PostgreSQL"
- Evidence: Current codebase (<code>age_client.py</code>), ADR-016 migration decision
- Relationship: CONTRADICTS "System uses Neo4j"</p>
<p><strong>The Resolution Question:</strong> Which truth is "more fundamental"? Which should the system present as authoritative?</p>
<h3 id="philosophical-grounding-godels-incompleteness-evolutionary-fitness">Philosophical Grounding: Gödel's Incompleteness &amp; Evolutionary Fitness</h3>
<p>Our knowledge graph is a <strong>mathematical construct</strong>:
- Nodes and edges form a complex relational equation
- Evidence text, relationship labels, embeddings are mathematical expressions
- <strong>Gödel's incompleteness theorems apply:</strong> No system can be both complete and consistent</p>
<p><strong>Implication:</strong> We cannot achieve perfect, unchanging truth. We can only approach a "more fundamental" truth through evidence accumulation and statistical confidence.</p>
<h3 id="connection-to-darwin-godel-machines">Connection to Darwin-Gödel Machines</h3>
<p>This design draws direct inspiration from the <strong>Darwin Gödel Machine</strong> (Zhang et al., 2025, arXiv:2505.22954) - a self-improving system that combines Gödel's self-referential proof-based optimization with Darwin's empirical evolutionary selection.</p>
<p><strong>The critical insight from DGM:</strong></p>
<p>The original Gödel Machine (Schmidhuber, 2007) required <strong>formal mathematical proof</strong> that each self-modification improves the system - impractical in real-world scenarios.</p>
<p>The Darwin Gödel Machine relaxes this requirement: Instead of theoretical proof, it uses <strong>empirical evidence from experiments</strong> to demonstrate that changes improve performance.</p>
<p><strong>Direct parallel to our system:</strong></p>
<table>
<thead>
<tr>
<th>Darwin Gödel Machine</th>
<th>Our Truth Convergence System</th>
</tr>
</thead>
<tbody>
<tr>
<td>Modifies its own code</td>
<td>Modifies knowledge representation</td>
</tr>
<tr>
<td>Empirical validation via coding benchmarks</td>
<td>Empirical validation via edge weight analysis</td>
</tr>
<tr>
<td>Fitness = performance on tasks</td>
<td>Fitness = <code>grounding_strength</code> (0.0-1.0)</td>
</tr>
<tr>
<td>Keeps changes that improve benchmark scores</td>
<td>Queries filter by grounding_strength threshold</td>
</tr>
<tr>
<td>Rejects changes that hurt performance</td>
<td>Filters concepts with grounding_strength &lt; 0.20 from default queries</td>
</tr>
<tr>
<td>Reversible (can revert bad changes)</td>
<td>Reversible (grounding recalculates as evidence shifts)</td>
</tr>
</tbody>
</table>
<p><strong>In our context:</strong>
- <strong>External system = Real world:</strong> Documents, code, architecture decisions provide empirical evidence
- <strong>Fitness function = grounding_strength:</strong> Concepts with grounding_strength &lt; 0.20 empirically fail fitness test
- <strong>Evolutionary selection:</strong> Low-grounding concepts filtered from default query results (grounding_strength &lt; 0.20)
- <strong>Self-modification:</strong> Graph structure evolves based on statistical evidence, not programmer assertions
- <strong>Empirical validation:</strong> No attempt to "prove" a concept is wrong - just measure support/contradict weight balance</p>
<p><strong>Key quote from DGM paper:</strong></p>
<blockquote>
<p>"The DGM relaxes the Gödel Machine's impractical requirement of theoretically proving that a change will improve the system, instead requiring empirical evidence from experiments."</p>
</blockquote>
<p><strong>Our application:</strong></p>
<blockquote>
<p>We relax the requirement of formally proving a concept is "false," instead requiring empirical evidence (grounding_strength &lt; 0.20, i.e., &lt;20% support) that the concept conflicts with observed reality.</p>
</blockquote>
<p><strong>Critical differences:</strong>
- Darwin-Gödel machines modify their <em>own code</em> (meta-learning)
- Our system modifies its <em>knowledge representation</em> (epistemic evolution)
- DGM proves changes through benchmark performance
- We prove changes through edge count statistics
- Both systems share: <strong>empirical validation over formal proof</strong></p>
<p>This is <strong>evolutionary epistemology</strong> - knowledge evolves through statistical fitness selection, not deterministic rules.</p>
<h3 id="ecological-metaphor-concepts-as-competing-species">Ecological Metaphor: Concepts as Competing Species</h3>
<p>We have, essentially, <strong>an ecology of concepts that compete for grounding support from the environment</strong>:</p>
<p><strong>Environmental niche:</strong> The "external system" provides evidence through document ingestion
- New documents = environmental changes
- Evidence instances = resources (food)
- SUPPORTS edges = symbiotic relationships
- CONTRADICTS edges = competitive relationships</p>
<p><strong>Evolutionary competition:</strong>
- <strong>"System uses Neo4j"</strong> and <strong>"System uses Apache AGE"</strong> compete for the same ecological niche
- Initially, Neo4j concept has strong support (12 SUPPORTS edges) - it's dominant (grounding_strength = 1.0)
- Apache AGE concept emerges with contradictory evidence (47 CONTRADICTS edges against Neo4j)
- Neo4j concept's fitness drops: <code>grounding_strength = 0.232</code> (23% support) → falls below survival threshold
- Apache AGE concept becomes dominant in the ecosystem (grounding_strength = 0.901)</p>
<p><strong>Natural selection mechanism:</strong>
- Fitness function = grounding_strength (continuous 0.0-1.0)
- Selection pressure = 0.20 threshold (20% minimum support)
- Survival = concepts with grounding_strength ≥ 0.20 appear in default query results
- Filtering = concepts with grounding_strength &lt; 0.20 excluded from default queries (but still findable)</p>
<p><strong>Key insight:</strong> We're not programming truth - we're letting truth emerge from competitive evolutionary pressure based on evidence accumulation.</p>
<p><strong>Unlike biological evolution:</strong>
- "Filtered" concepts aren't deleted (non-destructive filtering)
- Can reappear in results if environment changes (Neo4j might return for multi-region architecture)
- Fitness is recalculated continuously at every query - always reflects current evidence</p>
<p>This is <strong>conceptual Darwinism</strong> - ideas survive based on their fit with observable reality, not programmer assertions.</p>
<h3 id="information-theoretic-foundations">Information-Theoretic Foundations</h3>
<p>Beyond the philosophical and evolutionary metaphors, this approach is grounded in established information theory and statistical practice. When we measure contradiction ratios, we're not arbitrarily choosing metrics - we're quantifying uncertainty reduction and signal detection in a way that has deep connections to Shannon's information theory and Bayesian reasoning.</p>
<p><strong>Entropy reduction as truth convergence:</strong> In information-theoretic terms, high contradiction represents high entropy - significant uncertainty about whether a concept reflects reality. When "System uses Neo4j" has 12 SUPPORTS and 47 CONTRADICTS edges, the system is in a high-entropy state: query results are uncertain, and users receive conflicting information. Filtering the Neo4j concept (grounding_strength = 0.232 &lt; 0.20 threshold) from default queries reduces entropy by collapsing the uncertainty - the system now confidently presents "System uses Apache AGE" as the dominant truth. This isn't arbitrary pruning; it's entropy minimization based on empirical evidence.</p>
<p><strong>Bayesian updating through edge accumulation:</strong> Each ingested document provides new evidence in the form of SUPPORTS or CONTRADICTS edges. The graph effectively performs continuous Bayesian updating without explicit probability calculations. When grounding_strength drops to 0.20, we have strong posterior evidence (4:1 ratio of contradictions-to-supports) that the concept conflicts with observable reality. This threshold choice - corresponding to approximately 1.28 standard deviations - isn't pulled from thin air. It represents a standard confidence level used across statistical practice, from quality control to hypothesis testing. We're asking: "Is the evidence preponderance strong enough to warrant filtering?" At 4:1 contradictions-to-supports, the answer becomes statistically compelling.</p>
<p><strong>Signal-to-noise as fitness:</strong> The grounding_strength can be understood as a signal-to-noise ratio. A concept with low contradictions (high support) has strong signal relative to noise (grounding_strength → 1.0). A concept with high contradictions (low support) has poor signal-to-noise (grounding_strength → 0.0) and should be filtered from query results. This isn't subjective judgment - it's quantifiable information quality measurement. The fitness function <code>grounding_strength = support_weight / total_weight</code> directly measures how well a concept's signal stands above the noise of contradictory evidence.</p>
<p><strong>Mutual information and concept relationships:</strong> CONTRADICTS edges aren't just negative relationships - they carry information about concept incompatibility. High mutual information between "System uses Neo4j" and "System uses Apache AGE" (through strong CONTRADICTS edges) tells us these concepts occupy the same semantic niche and cannot both be true. The optional agent context uses this mutual information to reason about which concept better fits the evidence landscape, performing a form of information-theoretic model selection.</p>
<p><strong>Kolmogorov complexity and Occam's razor:</strong> Maintaining contradictory concepts in query results increases the system's Kolmogorov complexity - the minimal description length needed to represent the knowledge state. When we filter one concept based on low grounding_strength (&lt; 0.20), we're applying Occam's razor: the simpler explanation (one true state: Apache AGE) is preferred over the complex explanation (both might be true, context-dependent). This principle, formalized by Kolmogorov, isn't just philosophical - it's a practical heuristic for avoiding overfitting to noisy data.</p>
<p><strong>Why this isn't ad-hoc:</strong> Contrast this with typical RAG systems that use similarity thresholds like 0.7 or 0.75 with little justification beyond "it worked in our tests." Our 0.20 grounding_strength threshold is defensible because it corresponds to established statistical practice (1.28σ), requires strong evidence ratio (4:1 contradictions-to-supports), and can be empirically validated through A/B testing. Could it be 0.15 or 0.30 for specific domains? Certainly - and that would be domain-specific tuning within a theoretically sound framework, not arbitrary parameter fiddling.</p>
<p><strong>Reversibility as epistemic humility:</strong> The non-destructive query-time filtering approach acknowledges a fundamental information-theoretic reality: we're operating under incomplete information. Gödel proved that no system can be both complete and consistent; we're adding the practical corollary that no knowledge graph can be both comprehensive and correct. Evidence arrival is path-dependent and temporally ordered. Deleting concepts assumes certainty we cannot have; filtering them from default queries acknowledges we're making the best decision given current evidence, while remaining open to future evidence that shifts the balance. This is information-theoretically sound: we preserve information (all concepts remain in graph) while reducing query entropy (filtering low-grounding concepts from default results).</p>
<h3 id="current-system-behavior">Current System Behavior</h3>
<p><strong>What happens now:</strong>
1. System ingests "Neo4j" references → creates concepts with high confidence
2. System ingests "Apache AGE" references → creates new concepts
3. LLM may create CONTRADICTS edges between them
4. <strong>Both remain in the graph with equal standing</strong>
5. Query results may return contradictory information
6. No mechanism to determine which is "more true"</p>
<p><strong>Result:</strong> The graph faithfully represents what was ingested, but provides no guidance on which information reflects current reality.</p>
<h3 id="the-traditional-approaches-and-why-they-fail">The Traditional Approaches (And Why They Fail)</h3>
<p><strong>1. Temporal ordering ("newest wins"):</strong>
- ❌ Outdated information can be accidentally re-ingested
- ❌ Doesn't account for evidence strength
- ❌ What if we ingest historical documents about Neo4j after migrating to AGE?</p>
<p><strong>2. Source authority ("official docs override"):</strong>
- ❌ Requires manual source ranking
- ❌ What if official docs lag behind reality?
- ❌ Doesn't scale to diverse document types</p>
<p><strong>3. Delete contradicted concepts:</strong>
- ❌ <strong>Catastrophic information loss</strong>
- ❌ Irreversible if truth shifts again
- ❌ Loses historical context</p>
<p><strong>4. Manual curation:</strong>
- ❌ Doesn't scale
- ❌ Defeats purpose of automated knowledge extraction
- ❌ Requires constant human intervention</p>
<h2 id="decision">Decision</h2>
<h3 id="implement-query-time-grounding-strength-calculation">Implement Query-Time Grounding Strength Calculation</h3>
<p><strong>Core Principle:</strong> Truth emerges from statistical preponderance of evidence, calculated dynamically at query time, not stored as static labels.</p>
<p><strong>Update 2025-10-25:</strong> This ADR now depends on <strong>ADR-045 (Unified Embedding Generation)</strong>, which must be implemented first to enable embedding-based grounding calculation.</p>
<p><strong>Key insight:</strong> Rather than marking concepts as "IRRELEVANT" (static, binary, query-exclusion problem), we calculate a continuous <strong>grounding_strength</strong> score (0.0-1.0) based on current edge weights whenever the concept is queried.</p>
<h3 id="refined-approach-embedding-based-edge-semantics-2025-10-25">Refined Approach: Embedding-Based Edge Semantics (2025-10-25)</h3>
<p><strong>Discovery:</strong> During implementation planning, we found that <strong>binary polarity classification (positive/negative) is too reductive</strong> for the 64 edge types in production (30 builtin + 34 LLM-generated).</p>
<p><strong>Key findings:</strong>
1. System has <strong>8 semantic categories</strong> of relationships (evidential, logical, causal, structural, similarity, temporal, functional, meta)
2. LLM dynamically creates new edge types (34 types with 100% embedding coverage)
3. Builtin types lack embeddings (0/30 have embeddings - solved by ADR-045)
4. Hard-coding edge polarity doesn't scale with vocabulary expansion (ADR-032)</p>
<p><strong>Solution: Embedding-based semantic similarity instead of hard-coded polarity</strong></p>
<p>Rather than manually classifying each edge type as "positive" or "negative" for grounding, we use <strong>semantic similarity in embedding space</strong> to prototypical edge types:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># For each incoming edge, calculate similarity to prototypes</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">support_similarity</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">edge_embedding</span><span class="p">,</span> <span class="n">SUPPORTS_embedding</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">contradict_similarity</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">edge_embedding</span><span class="p">,</span> <span class="n">CONTRADICTS_embedding</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># Weight by confidence and semantic similarity</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">if</span> <span class="n">support_similarity</span> <span class="o">&gt;</span> <span class="n">contradict_similarity</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="n">support_weight</span> <span class="o">+=</span> <span class="n">edge</span><span class="o">.</span><span class="n">confidence</span> <span class="o">*</span> <span class="n">support_similarity</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">contradict_weight</span> <span class="o">+=</span> <span class="n">edge</span><span class="o">.</span><span class="n">confidence</span> <span class="o">*</span> <span class="n">contradict_similarity</span>
</code></pre></div>
<p><strong>Advantages over binary polarity:</strong>
- ✅ Works with <strong>any edge type</strong> (even brand new LLM-generated ones)
- ✅ <strong>No manual classification</strong> needed
- ✅ <strong>Continuous spectrum</strong> (ENHANCES vs SUPPORTS vs FOUNDATION_FOR weighted differently)
- ✅ <strong>Future-proof</strong> for vocabulary expansion
- ✅ <strong>Semantically nuanced</strong> (embedding space captures meaning)</p>
<p><strong>Prerequisites (ADR-045):</strong>
1. All vocabulary types must have embeddings
2. Unified embedding generation system for cold start
3. Ability to regenerate embeddings when model changes</p>
<h3 id="mechanism-dynamic-grounding-strength-computation">Mechanism: Dynamic Grounding Strength Computation</h3>
<p><strong>1. Calculate Grounding Strength (Query-Time)</strong></p>
<p>For any concept node, calculate grounding strength using edge confidence scores:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Sum confidence scores (force magnitude), not just count edges</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">support_weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">confidence</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">incoming</span> <span class="n">SUPPORTS</span> <span class="n">relationships</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">contradict_weight</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">confidence</span> <span class="k">for</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">incoming</span> <span class="n">CONTRADICTS</span> <span class="n">relationships</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">total_weight</span> <span class="o">=</span> <span class="n">support_weight</span> <span class="o">+</span> <span class="n">contradict_weight</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># Grounding strength = proportion of support vs total evidence</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">grounding_strength</span> <span class="o">=</span> <span class="n">support_weight</span> <span class="o">/</span> <span class="n">total_weight</span> <span class="k">if</span> <span class="n">total_weight</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">1.0</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># Default 1.0 = no contradictions = assume well-grounded</span>
</code></pre></div>
<p><strong>Why grounding_strength, not "irrelevant" marking:</strong></p>
<p><strong>Problems with static marking:</strong>
- ❌ <strong>Query paradox:</strong> If we exclude marked concepts, how do we find them to re-evaluate?
- ❌ <strong>Stale state:</strong> Marking freezes a point-in-time decision, but edges keep accumulating
- ❌ <strong>Binary thinking:</strong> Concept is either relevant or not - but truth is continuous
- ❌ <strong>Computational waste:</strong> Agent introspection needed every mark/unmark operation</p>
<p><strong>Advantages of dynamic calculation:</strong>
- ✅ <strong>Always current:</strong> Reflects latest edge weights at query time
- ✅ <strong>Continuous score:</strong> 0.0 (contradicted) to 1.0 (supported), not binary
- ✅ <strong>Query-time filtering:</strong> <code>WHERE grounding_strength &gt;= 0.20</code> (adjustable threshold)
- ✅ <strong>Always findable:</strong> Lower threshold to find weakly-grounded concepts
- ✅ <strong>Self-updating:</strong> New edges automatically affect score
- ✅ <strong>Pure mathematics:</strong> No agent needed for score calculation</p>
<p><strong>Example showing grounding_strength:</strong></p>
<table>
<thead>
<tr>
<th>Edges</th>
<th>Support Weight</th>
<th>Contradict Weight</th>
<th>Grounding Strength</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td>12 S, 47 C</td>
<td>10.2</td>
<td>33.84</td>
<td>10.2/44.04 = <strong>0.232</strong></td>
<td>Weakly grounded (23%)</td>
</tr>
<tr>
<td>47 S, 12 C</td>
<td>33.84</td>
<td>10.2</td>
<td>33.84/44.04 = <strong>0.768</strong></td>
<td>Well grounded (77%)</td>
</tr>
<tr>
<td>50 S, 5 C</td>
<td>42.0</td>
<td>4.2</td>
<td>42.0/46.2 = <strong>0.909</strong></td>
<td>Strongly grounded (91%)</td>
</tr>
<tr>
<td>5 S, 50 C</td>
<td>4.2</td>
<td>42.0</td>
<td>4.2/46.2 = <strong>0.091</strong></td>
<td>Contradicted (9%)</td>
</tr>
</tbody>
</table>
<p><strong>Why weighted, not counted:</strong></p>
<p>Edges have <strong>direction</strong> (FROM → TO) and <strong>magnitude</strong> (confidence: 0.0-1.0). To properly calculate statistical distributions, we need <strong>force vectors</strong>, not binary counts:</p>
<ul>
<li><strong>Binary counting</strong> (wrong): 47 contradictions = 47.0 total force</li>
<li><strong>Weighted summing</strong> (correct): 47 contradictions with avg confidence 0.72 = 33.84 total force</li>
</ul>
<p>Weighted approach is more statistically sound:
- Gives continuous variable (suitable for normal distribution)
- Weak contradictions (confidence &lt; 0.6) don't overwhelm strong supports
- Strong contradictions (confidence &gt; 0.9) appropriately dominate
- Aligns with information-theoretic grounding (confidence = information content)</p>
<p><strong>2. Query-Time Filtering with Adjustable Threshold</strong></p>
<p>Default queries filter by minimum grounding strength:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span><span class="w">  </span><span class="c1">// Default: exclude concepts with &lt;20% support</span>
</code></pre></div>
<p><strong>Why 20% (0.20) threshold?</strong>
- Inverse of 80% contradiction ratio (1.0 - 0.80 = 0.20)
- Corresponds to ~1.28σ in normal distribution
- Represents clear statistical signal while avoiding noise
- Requires 4:1 ratio of contradictions to supports (strong evidence shift)
- <strong>Adjustable per query:</strong> Can lower to 0.10 or raise to 0.50 based on needs</p>
<p><strong>3. Optional Agent-Based Context (For LLM Queries)</strong></p>
<p>When presenting weakly-grounded concepts to LLMs, optionally include agent-generated context:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>Agent retrieves:
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  - Weakly-grounded concept (grounding_strength &lt; 0.20)
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>  - All adjacent CONTRADICTS edges
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>  - All adjacent SUPPORTS edges
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>  - Evidence text from all instances
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>  - Source documents and dates
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>Agent provides context:
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>  &quot;Given evidence that:
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>   - Neo4j mentioned in 12 documents (2025-10-01 to 2025-10-08)
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>   - Apache AGE mentioned in 47 documents (2025-10-10 to 2025-10-24)
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>   - ADR-016 states migration occurred 2025-10-09
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>   - Current codebase uses age_client.py, not neo4j_client.py
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>   Context: &#39;System uses Neo4j&#39; has grounding_strength of 0.232 (23% support)
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>   Interpretation: Temporal evidence + codebase verification suggests this
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>   represents historical state, not current architecture.
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>   Confidence: 0.95&quot;
</code></pre></div>
<p><strong>Agent's new role:</strong>
- ❌ Does NOT mark concepts as irrelevant
- ❌ Does NOT modify graph structure
- ✅ Provides explanatory context for weakly-grounded concepts
- ✅ Helps LLMs synthesize accurate responses
- ✅ Optional enhancement - queries work without agent</p>
<p><strong>LLM query pattern with agent context:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Presupposition: The following concepts have weak grounding in evidence:
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Concept: &quot;System uses Neo4j&quot;
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>- Grounding strength: 0.232 (23% support, 77% contradiction)
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>- Context: Represents historical state (pre-2025-10-09 migration)
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>- Current alternative: &quot;System uses Apache AGE + PostgreSQL&quot; (grounding: 0.901)
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Given this context, synthesize the best possible true statement about:
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>&quot;What database does the system use?&quot;
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>Expected response: &quot;The system currently uses Apache AGE + PostgreSQL.
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>It previously used Neo4j but migrated in October 2025 per ADR-016.&quot;
</code></pre></div>
<p><strong>Key insight:</strong> Agent provides interpretive context, but the <strong>grounding_strength calculation is pure mathematics</strong> - no agent needed for the core filtering mechanism.</p>
<h3 id="bounded-rationality-query-depth-constraints">Bounded Rationality: Query Depth Constraints</h3>
<p><strong>The Frame Problem:</strong> When calculating grounding strength, where do we stop recursive evaluation?</p>
<p><strong>Herbert Simon's bounded rationality:</strong> Agents (human or computational) cannot optimize globally due to:
- Computational limits (time, memory, processing power)
- Incomplete information (can't know everything)
- Cognitive/architectural constraints (must decide with partial knowledge)</p>
<p><strong>Direct parallel:</strong> Just as humans can't consider every consequence before stepping (microorganisms harmed, butterfly effects, infinite causal chains), our system can't recursively evaluate grounding strength through the entire graph.</p>
<h4 id="the-recursive-depth-explosion">The Recursive Depth Explosion</h4>
<p><strong>Depth 0 (Trivial):</strong> Return concept without considering any edges
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>Complexity: O(1)
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Information: None (just the concept label)
</code></pre></div></p>
<p><strong>Depth 1 (Current Design):</strong> Calculate grounding_strength from direct edges only
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>grounding_strength = support_weight / total_weight
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Complexity: O(|incoming_edges|)
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Information: Direct evidence from adjacent concepts
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>Decision: Pragmatic - bounded computation, sufficient signal
</code></pre></div></p>
<p><strong>Depth 2 (Recursive):</strong> Weight edges by grounding_strength of source concepts
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># Edge weight influenced by source concept&#39;s grounding
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>weighted_support = sum(
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    edge.confidence * source_concept.grounding_strength
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    for edge in SUPPORTS edges
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>)
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>Complexity: O(|edges| × |edges_per_adjacent_concept|)
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>Information: Evidence + quality of evidence sources
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>Problems:
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>  - Must calculate grounding for N adjacent concepts first
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>  - Each adjacent concept may have M edges to evaluate
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>  - N × M quickly becomes large
</code></pre></div></p>
<p><strong>Depth 3+ (Unbounded):</strong> Recursively evaluate grounding of supporting concepts
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Complexity: O(|edges|^depth) - exponential explosion
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Problems:
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>  ✗ Cycles: A supports B supports C supports A → infinite recursion
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>  ✗ Branching: Each concept has multiple supports, tree explodes
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>  ✗ Termination: When to stop? Need global knowledge (Gödelian barrier)
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>  ✗ Query latency: Milliseconds → seconds → minutes → timeout
</code></pre></div></p>
<p><strong>Example explosion:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Depth 1: Concept has 10 edges → 10 evaluations
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Depth 2: Each edge source has 10 edges → 10 × 10 = 100 evaluations
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Depth 3: Each depth-2 concept has 10 edges → 10 × 10 × 10 = 1,000 evaluations
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Depth 4: → 10,000 evaluations
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>Depth 5: → 100,000 evaluations (likely timeout)
</code></pre></div></p>
<p><strong>Your analogy:</strong> "Imagine if I had to consider what I would harm with every step I took."
- Depth 1: "Is the ground stable?" (local, practical)
- Depth 2: "Are the molecules in the ground stable?" (getting theoretical)
- Depth 3: "Are the quarks in those molecules stable?" (absurd for walking)
- Depth ∞: Complete knowledge of all consequences (impossible, Gödelian)</p>
<h4 id="opencypher-query-depth-rules">OpenCypher Query Depth Rules</h4>
<p><strong>Rule 1: Default to Depth 1 (Direct Edges Only)</strong></p>
<p>All grounding_strength calculations use direct SUPPORTS/CONTRADICTS edges:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// Standard grounding calculation: depth=1</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">d</span><span class="p">:</span><span class="n">CONTRADICTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_weight</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">     </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">     </span><span class="n">contradict_weight</span><span class="p">,</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">     </span><span class="k">CASE</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">       </span><span class="k">WHEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">       </span><span class="k">THEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="p">(</span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="p">)</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">       </span><span class="n">ELSE</span><span class="w"> </span><span class="m">1</span><span class="p">.</span><span class="m">0</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">     </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">grounding_strength</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">grounding_strength</span>
</code></pre></div>
<p><strong>Rationale:</strong>
- O(|edges|) complexity - scales linearly
- Query completes in milliseconds even with thousands of concepts
- Sufficient signal: direct evidence is strongest signal
- Bounded computation: doesn't require graph-wide traversal</p>
<p><strong>Rule 2: Maximum Traversal Depth = 3 Hops (For Path Queries)</strong></p>
<p>When finding paths between concepts (not grounding calculation), limit traversal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// Path finding: max depth 3</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span><span class="o">-[</span><span class="p">*</span><span class="m">1</span><span class="p">..</span><span class="m">3</span><span class="o">]-</span><span class="p">(</span><span class="n">c2</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="n">concept_id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="err">$</span><span class="n">source_id</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">c2</span><span class="p">.</span><span class="n">concept_id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="err">$</span><span class="n">target_id</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">path</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="k">LIMIT</span><span class="w"> </span><span class="m">10</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="c1">// NOT THIS (unbounded):</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="k">MATCH</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span><span class="o">-[</span><span class="p">*</span><span class="o">]-</span><span class="p">(</span><span class="n">c2</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span><span class="w">  </span><span class="c1">// ✗ Can explode to entire graph</span>
</code></pre></div>
<p><strong>Rationale:</strong>
- Depth 3 allows: A → B → C → D (sufficient for most conceptual relationships)
- Beyond depth 3: relationship is too indirect to be meaningful
- Prevents graph-wide traversal (could hit thousands of nodes)</p>
<p><strong>Rule 3: Use LIMIT Aggressively</strong></p>
<p>Always limit result sets to prevent runaway queries:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">// Good: limited result set</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="k">LIMIT</span><span class="w"> </span><span class="m">1000</span><span class="w">  </span><span class="c1">// Maximum 1000 concepts returned</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="c1">// Bad: unbounded</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="w">  </span><span class="c1">// ✗ Could return millions of nodes</span>
</code></pre></div>
<p><strong>Rationale:</strong>
- Even O(n) queries become expensive with large n
- Application layer pagination (1000 per page) prevents memory exhaustion
- User can't process 10,000+ results anyway (cognitive bounded rationality)</p>
<p><strong>Rule 4: Avoid Recursive CTEs for Grounding</strong></p>
<p>Do NOT use recursive common table expressions for grounding calculations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">// ✗ AVOID: Recursive grounding (depth=N, unbounded)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">WITH</span><span class="w"> </span><span class="err">$</span><span class="n">concept_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">root_id</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">CALL</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="k">WITH</span><span class="w"> </span><span class="n">root_id</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">  </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="n">root_id</span><span class="p">})</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">  </span><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">(</span><span class="n">source</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">  </span><span class="c1">// Recursively calculate source grounding... → UNBOUNDED</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">  </span><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">grounding</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="p">}</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">grounding</span>
</code></pre></div>
<p><strong>Why avoid:</strong>
- Triggers exponential traversal (O(edges^depth))
- Cycle detection adds complexity and overhead
- Termination conditions hard to define correctly
- Query optimizer can't predict runtime</p>
<p><strong>Alternative:</strong> If recursive grounding is truly needed (rare), implement iteratively:
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># Python application layer: iterative depth-limited grounding</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">calculate_recursive_grounding</span><span class="p">(</span><span class="n">concept_id</span><span class="p">,</span> <span class="n">max_depth</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate grounding with limited recursion.&quot;&quot;&quot;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">recurse</span><span class="p">(</span><span class="n">cid</span><span class="p">,</span> <span class="n">depth</span><span class="p">):</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>        <span class="k">if</span> <span class="n">depth</span> <span class="o">&gt;</span> <span class="n">max_depth</span> <span class="ow">or</span> <span class="n">cid</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>            <span class="k">return</span> <span class="mf">1.0</span>  <span class="c1"># Default grounding</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>        <span class="c1"># Calculate depth-1 grounding via query</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>        <span class="n">direct_grounding</span> <span class="o">=</span> <span class="n">query_direct_grounding</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>        <span class="k">if</span> <span class="n">depth</span> <span class="o">==</span> <span class="n">max_depth</span><span class="p">:</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>            <span class="k">return</span> <span class="n">direct_grounding</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>        <span class="c1"># Weight by source concept grounding (depth+1)</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>        <span class="n">support_sources</span> <span class="o">=</span> <span class="n">query_support_sources</span><span class="p">(</span><span class="n">cid</span><span class="p">)</span>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>        <span class="n">weighted_support</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>            <span class="n">edge</span><span class="o">.</span><span class="n">confidence</span> <span class="o">*</span> <span class="n">recurse</span><span class="p">(</span><span class="n">source</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>            <span class="k">for</span> <span class="n">source</span> <span class="ow">in</span> <span class="n">support_sources</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>        <span class="p">)</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>        <span class="c1"># Similar for contradictions...</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>        <span class="k">return</span> <span class="n">weighted_support</span> <span class="o">/</span> <span class="n">total_weight</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>    <span class="k">return</span> <span class="n">recurse</span><span class="p">(</span><span class="n">concept_id</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Rule 5: Cycle Detection Required for Depth &gt; 1</strong></p>
<p>If implementing recursive queries, MUST track visited nodes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">// Depth 2 with cycle prevention</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="k">WITH</span><span class="w"> </span><span class="err">$</span><span class="n">concept_id</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">root_id</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="n">root_id</span><span class="p">})</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">(</span><span class="n">source</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">source</span><span class="p">.</span><span class="n">concept_id</span><span class="w"> </span><span class="p">&lt;&gt;</span><span class="w"> </span><span class="n">root_id</span><span class="w">  </span><span class="c1">// Prevent immediate cycle</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s2</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">(</span><span class="n">source2</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">source2</span><span class="p">.</span><span class="n">concept_id</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="o">[</span><span class="n">root_id</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">.</span><span class="n">concept_id</span><span class="o">]</span><span class="w">  </span><span class="c1">// Prevent cycles</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">source_edges</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="c1">// ... calculate weighted grounding ...</span>
</code></pre></div>
<p><strong>Rationale:</strong>
- Graph has cycles: A supports B supports A (common in knowledge graphs)
- Without cycle detection: infinite recursion or exponential duplication
- Cycle tracking overhead: O(visited_nodes) memory per query
- Trade-off: correctness vs complexity</p>
<h4 id="complexity-analysis-summary">Complexity Analysis Summary</h4>
<table>
<thead>
<tr>
<th>Depth</th>
<th>Complexity</th>
<th>Query Time (1000 concepts)</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>O(1)</td>
<td>&lt;1ms</td>
<td>Concept lookup only</td>
</tr>
<tr>
<td>1</td>
<td>O(E)</td>
<td>10-50ms</td>
<td><strong>Default: grounding_strength</strong></td>
</tr>
<tr>
<td>2</td>
<td>O(E × E_adj)</td>
<td>100-500ms</td>
<td>Advanced: weighted grounding</td>
</tr>
<tr>
<td>3</td>
<td>O(E³)</td>
<td>1-10 seconds</td>
<td>Rare: deep path analysis</td>
</tr>
<tr>
<td>4+</td>
<td>O(E^depth)</td>
<td>10+ seconds → timeout</td>
<td><strong>Avoid: computationally infeasible</strong></td>
</tr>
</tbody>
</table>
<p>Where:
- E = average edges per concept (~10-50 in typical knowledge graphs)
- E_adj = average edges per adjacent concept</p>
<p><strong>Practical implications:</strong>
- Depth 1 (current design): Handles 1M+ concepts with subsecond queries
- Depth 2 (future): Requires caching or async processing
- Depth 3+: Only for offline analysis, not real-time queries</p>
<h4 id="design-decision-depth1-as-pragmatic-optimum">Design Decision: Depth=1 as Pragmatic Optimum</h4>
<p><strong>Why depth=1 is sufficient:</strong></p>
<p>✅ <strong>Direct edges carry strongest signal:</strong>
- Evidence instances directly reference this concept
- Confidence scores reflect extraction quality
- SUPPORTS/CONTRADICTS edges explicitly created by LLM</p>
<p>✅ <strong>Higher depths add noise, not signal:</strong>
- Depth 2: "Concepts that support concepts that support this concept"
- Information dilution: indirect relationships are weaker
- Transitive support isn't necessarily meaningful</p>
<p>✅ <strong>Computational feasibility:</strong>
- O(edges) scales to millions of concepts
- Query completes in &lt;100ms for typical graphs
- No cycle detection needed</p>
<p>✅ <strong>Aligns with human cognition:</strong>
- Humans evaluate claims based on direct evidence
- We don't recursively validate the validator's validator's validator
- <strong>Bounded rationality:</strong> Direct evidence is practical decision-making basis</p>
<p><strong>Sutton's bitter lesson applied:</strong>
- ✅ Computational method: Simple depth=1 force vector summing
- ✅ Scales with compute: More edges = better signal (doesn't require deeper reasoning)
- ❌ Human-like reasoning: Recursive "how credible is my source?" requires complex logic</p>
<p><strong>Trade-off acknowledged:</strong>
- Lose: Ability to weight edges by source concept quality
- Gain: Practical, scalable, real-time grounding calculations
- Future: Can add depth=2 as optional enhancement (cached, async)</p>
<h4 id="future-depth2-as-optional-enhancement">Future: Depth=2 as Optional Enhancement</h4>
<p>If depth=1 proves insufficient (rare), consider depth=2 with strict constraints:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">// Depth-2 grounding (optional, future)</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="c1">// Step 1: Calculate depth-1 grounding for all concepts (cached)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="c1">// Step 2: Use cached values to weight edges</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="err">$</span><span class="n">concept_id</span><span class="p">})</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">(</span><span class="n">source</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">d</span><span class="p">:</span><span class="n">CONTRADICTS</span><span class="o">]-</span><span class="p">(</span><span class="n">contra</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="c1">// Use pre-cached grounding_strength from depth-1 calculation</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">     </span><span class="k">collect</span><span class="p">({</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">       </span><span class="n">edge</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="p">,</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">       </span><span class="n">source_grounding</span><span class="p">:</span><span class="w"> </span><span class="n">source</span><span class="p">.</span><span class="n">grounding_strength_cached</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">     </span><span class="p">})</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_edges</span><span class="p">,</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">     </span><span class="k">collect</span><span class="p">({</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">       </span><span class="n">edge</span><span class="p">:</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">       </span><span class="n">source_grounding</span><span class="p">:</span><span class="w"> </span><span class="n">contra</span><span class="p">.</span><span class="n">grounding_strength_cached</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="w">     </span><span class="p">})</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_edges</span>
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a><span class="c1">// Weight edges by source concept grounding</span>
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">support_edges</span><span class="w"> </span><span class="p">|</span>
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a><span class="w">       </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">edge</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">source_grounding</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">.</span><span class="m">0</span><span class="p">)</span>
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a><span class="w">     </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">weighted_support</span><span class="p">,</span>
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">contradict_edges</span><span class="w"> </span><span class="p">|</span>
<a id="__codelineno-16-26" name="__codelineno-16-26" href="#__codelineno-16-26"></a><span class="w">       </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">edge</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">)</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">source_grounding</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">.</span><span class="m">0</span><span class="p">)</span>
<a id="__codelineno-16-27" name="__codelineno-16-27" href="#__codelineno-16-27"></a><span class="w">     </span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">weighted_contradict</span>
<a id="__codelineno-16-28" name="__codelineno-16-28" href="#__codelineno-16-28"></a>
<a id="__codelineno-16-29" name="__codelineno-16-29" href="#__codelineno-16-29"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-16-30" name="__codelineno-16-30" href="#__codelineno-16-30"></a><span class="w">       </span><span class="n">weighted_support</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="p">(</span><span class="n">weighted_support</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">weighted_contradict</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">grounding_strength_depth2</span>
</code></pre></div>
<p><strong>Requirements for depth=2:</strong>
- Must cache depth-1 grounding_strength for all concepts (materialized view)
- Cache invalidation on edge changes (complexity overhead)
- A/B test vs depth=1 to verify improvement justifies cost
- Only enable if depth=1 demonstrably insufficient</p>
<p><strong>Expected outcome:</strong> Depth=1 will be sufficient for 95%+ of use cases.</p>
<h3 id="automatic-reversibility-through-continuous-calculation">Automatic Reversibility Through Continuous Calculation</h3>
<p><strong>Scenario:</strong> New evidence reverses the grounding strength</p>
<p><strong>Example:</strong>
1. "System uses Neo4j" has <code>grounding_strength = 0.232</code> (weakly grounded)
2. Later, 50 new documents describe "Neo4j cluster for HA" (future architecture)
3. New SUPPORTS edges shift the balance
4. Recalculated: <code>grounding_strength = 0.851</code> (now well-grounded)</p>
<p><strong>Automatic behavior:</strong>
- ✅ <strong>No manual re-evaluation needed</strong> - grounding_strength recalculates at every query
- ✅ <strong>No state management</strong> - no marking/unmarking operations
- ✅ <strong>Always current</strong> - reflects latest edge weights immediately
- ✅ <strong>No cascading updates</strong> - each concept's score is independent</p>
<p><strong>Query behavior changes automatically:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// When grounding_strength was 0.232 (below 0.20 threshold)</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="c1">// Concept excluded from results</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1">// After new evidence, grounding_strength becomes 0.851</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1">// Concept now included in results - automatically!</span>
</code></pre></div>
<p><strong>Historical queries still work:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">// View all concepts regardless of grounding</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="w">  </span><span class="c1">// Include everything</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="c1">// View only weakly-grounded concepts (for analysis)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span><span class="w">  </span><span class="c1">// Show contradicted concepts</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="c1">// View grounding strength evolution (if we add temporal tracking)</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">label</span><span class="p">,</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">       </span><span class="n">grounding_strength_current</span><span class="p">,</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">       </span><span class="n">grounding_strength_30_days_ago</span><span class="p">,</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">       </span><span class="n">grounding_strength_delta</span>
</code></pre></div>
<p><strong>No state management needed:</strong>
- No IRRELEVANT → REINSTATED transitions
- No dated markers (marked_irrelevant_date, reinstated_date)
- No agent reasoning stored
- Just pure mathematical calculation from current edge weights</p>
<h2 id="implementation">Implementation</h2>
<h3 id="phase-1-detection-metrics-immediate">Phase 1: Detection &amp; Metrics (Immediate)</h3>
<p><strong>1. Grounding Strength Query (Standard Pattern):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1">// Calculate grounding_strength for all concepts</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">d</span><span class="p">:</span><span class="n">CONTRADICTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">     </span><span class="k">collect</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_edges</span><span class="p">,</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">     </span><span class="k">collect</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_edges</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">     </span><span class="n">support_edges</span><span class="p">,</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">     </span><span class="n">contradict_edges</span><span class="p">,</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">support_edges</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">edge</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">edge</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">contradict_edges</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">edge</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_weight</span><span class="p">,</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">     </span><span class="n">size</span><span class="p">(</span><span class="n">support_edges</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_count</span><span class="p">,</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">     </span><span class="n">size</span><span class="p">(</span><span class="n">contradict_edges</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_count</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">     </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">     </span><span class="n">contradict_weight</span><span class="p">,</span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">     </span><span class="n">support_count</span><span class="p">,</span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">     </span><span class="n">contradict_count</span><span class="p">,</span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="w">     </span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_weight</span><span class="p">,</span>
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a><span class="w">     </span><span class="k">CASE</span>
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a><span class="w">       </span><span class="k">WHEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a><span class="w">       </span><span class="k">THEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="p">(</span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="p">)</span>
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a><span class="w">       </span><span class="n">ELSE</span><span class="w"> </span><span class="m">1</span><span class="p">.</span><span class="m">0</span><span class="w">  </span><span class="c1">// No contradictions = assume well-grounded</span>
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a><span class="w">     </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">grounding_strength</span>
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">total_weight</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">3</span><span class="p">.</span><span class="m">0</span><span class="w">  </span><span class="c1">// Minimum weight for statistical significance</span>
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a><span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span><span class="w">  </span><span class="c1">// Default threshold: 20% support minimum</span>
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">label</span><span class="p">,</span>
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a><span class="w">       </span><span class="n">c</span><span class="p">.</span><span class="n">concept_id</span><span class="p">,</span>
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a><span class="w">       </span><span class="n">support_count</span><span class="p">,</span>
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a><span class="w">       </span><span class="n">contradict_count</span><span class="p">,</span>
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a><span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="n">support_weight</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a><span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="n">contradict_weight</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">100</span><span class="p">)</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_weight</span><span class="p">,</span>
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a><span class="w">       </span><span class="n">round</span><span class="p">(</span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">*</span><span class="w"> </span><span class="m">1000</span><span class="p">)</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">grounding_strength</span>
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="k">ASC</span><span class="p">,</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="k">DESC</span>
</code></pre></div>
<p><strong>Key features:</strong>
- Uses <code>reduce()</code> to sum edge confidence scores, not <code>count()</code>
- Falls back to 0.8 if confidence missing (backward compatibility)
- Minimum weight threshold (3.0) instead of minimum count (5)
- <code>grounding_strength</code> = support_weight / total_weight (continuous 0.0-1.0)
- Adjustable threshold: change 0.20 to query different confidence levels</p>
<p><strong>2. Find weakly-grounded concepts (for analysis):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">// Find concepts with low grounding (potential contradictions)</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">s</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="k">OPTIONAL</span><span class="w"> </span><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">&lt;-[</span><span class="n">d</span><span class="p">:</span><span class="n">CONTRADICTS</span><span class="o">]-</span><span class="p">()</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">     </span><span class="n">reduce</span><span class="p">(</span><span class="n">sum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">collect</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">coalesce</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">confidence</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">8</span><span class="p">))</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">contradict_weight</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">     </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">     </span><span class="n">contradict_weight</span><span class="p">,</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">     </span><span class="k">CASE</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">       </span><span class="k">WHEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">       </span><span class="k">THEN</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="p">(</span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="p">)</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">       </span><span class="n">ELSE</span><span class="w"> </span><span class="m">1</span><span class="p">.</span><span class="m">0</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">     </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">grounding_strength</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span><span class="w">  </span><span class="c1">// Weakly grounded</span>
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">support_weight</span><span class="w"> </span><span class="err">+</span><span class="w"> </span><span class="n">contradict_weight</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">3</span><span class="p">.</span><span class="m">0</span><span class="w">  </span><span class="c1">// Minimum significance</span>
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">label</span><span class="p">,</span>
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="w">       </span><span class="n">grounding_strength</span><span class="p">,</span>
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">       </span><span class="n">support_weight</span><span class="p">,</span>
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">       </span><span class="n">contradict_weight</span>
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="k">ASC</span>
</code></pre></div>
<p><strong>3. No concept properties needed:</strong></p>
<p>Concepts remain unchanged - no status field, no marking dates. Grounding strength is computed purely from edges at query time.</p>
<p><strong>4. API endpoints:</strong>
- <code>GET /admin/grounding-analysis</code> - List weakly-grounded concepts
- <code>POST /admin/agent-context/{concept_id}</code> - Generate agent interpretation (optional)
- <code>GET /concepts?min_grounding=0.20</code> - Query with custom threshold</p>
<h3 id="phase-2-agent-context-generation-optional-enhancement">Phase 2: Agent Context Generation (Optional Enhancement)</h3>
<p><strong>Context Generation Agent prompt:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>You are providing interpretive context for a weakly-grounded concept in a knowledge graph.
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>Concept: {label}
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>Grounding strength: {grounding_strength} ({percent}% support)
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>Support weight: {support_weight} (from {support_count} edges)
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>Contradict weight: {contradict_weight} (from {contradict_count} edges)
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>Evidence supporting this concept:
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>{formatted_support_evidence}
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>Evidence contradicting this concept:
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>{formatted_contradict_evidence}
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>Source documents:
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>{document_list_with_dates}
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>Your task:
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>1. Analyze the temporal pattern (is this historical vs current?)
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>2. Assess evidence quality (which evidence is more authoritative?)
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>3. Identify the most likely alternative concept (higher grounding)
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>4. Provide context that helps an LLM synthesize accurate responses
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>Provide:
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>- Interpretation: 2-3 sentence explanation grounded in evidence
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>- Alternative concept: {concept_label} (grounding: {grounding_strength})
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>- Temporal context: &quot;Historical&quot; | &quot;Current&quot; | &quot;Future&quot; | &quot;Context-dependent&quot;
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>- Confidence: 0.0-1.0
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>
<a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>Format response as JSON.
</code></pre></div>
<p><strong>Agent uses:</strong>
- OpenAI GPT-4o or Anthropic Claude Sonnet 4
- Temperature: 0.1 (low, for consistency)
- Max tokens: 500
- Retrieves up to 50 evidence instances per concept</p>
<p><strong>Key difference from marking approach:</strong>
- Agent does NOT make binary decisions (mark/don't mark)
- Agent provides interpretive context for LLMs to use
- Agent output is optional enhancement, not required for filtering
- Grounding strength calculation happens independently of agent</p>
<h3 id="phase-3-performance-optimization-future">Phase 3: Performance Optimization (Future)</h3>
<p><strong>Caching grounding_strength:</strong></p>
<p>For performance, optionally cache grounding_strength calculations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1">// Materialized view pattern (recalculated periodically)</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="p">(:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">  </span><span class="n">grounding_strength_cached</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">768</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="n">grounding_cache_date</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-10-24T10:30:00Z&quot;</span><span class="p">,</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="n">grounding_cache_ttl</span><span class="p">:</span><span class="w"> </span><span class="m">3600</span><span class="w">  </span><span class="c1">// seconds</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="p">})</span>
</code></pre></div>
<p><strong>Cache invalidation:</strong>
- Invalidate when new SUPPORTS or CONTRADICTS edges added to concept
- Or use TTL (time-to-live) approach: recalculate every N seconds
- Trade-off: staleness vs query performance</p>
<p><strong>Monitoring metrics:</strong>
- Average grounding_strength across all concepts
- Distribution of grounding_strength (histogram)
- Concepts with grounding &lt; 0.20 (count trending over time)
- Query performance with/without caching</p>
<h2 id="examples">Examples</h2>
<h3 id="example-1-neo4j-apache-age-actual">Example 1: Neo4j → Apache AGE (Actual)</h3>
<p><strong>Initial state (2025-10-08):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>(:Concept {label: &quot;System uses Neo4j&quot;})
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>  ← SUPPORTS ← (12 evidence instances from docs, avg confidence 0.85)
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>Grounding calculation:
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>  support_weight: 12 × 0.85 = 10.2
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>  contradict_weight: 0
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>  grounding_strength: 10.2 / 10.2 = 1.00 (fully supported)
</code></pre></div></p>
<p><strong>After ingestion (2025-10-24):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>(:Concept {label: &quot;System uses Neo4j&quot;})
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>  ← SUPPORTS ← (12 evidence instances from old docs, avg confidence 0.85)
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>  ← CONTRADICTS ← (47 evidence instances from new docs, avg confidence 0.72)
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>Grounding calculation:
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>  support_weight: 12 × 0.85 = 10.2
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>  contradict_weight: 47 × 0.72 = 33.84
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>  total_weight: 44.04
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>  grounding_strength: 10.2 / 44.04 = 0.232 (23% support, 77% contradiction)
</code></pre></div></p>
<p><strong>Optional agent context:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">&quot;interpretation&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Temporal analysis shows Neo4j references end 2025-10-08. ADR-016 explicitly documents migration to Apache AGE on 2025-10-09. Current codebase (age_client.py) and all recent documentation reference Apache AGE. Neo4j represents historical state, not current architecture.&quot;</span><span class="p">,</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">  </span><span class="nt">&quot;alternative_concept&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;System uses Apache AGE + PostgreSQL&quot;</span><span class="p">,</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">  </span><span class="nt">&quot;alternative_grounding&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.901</span><span class="p">,</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span><span class="nt">&quot;temporal_context&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Historical&quot;</span><span class="p">,</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">  </span><span class="nt">&quot;confidence&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Query behavior (automatic):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1">// Default query (grounding &gt;= 0.20)</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="c1">// ... calculate grounding_strength ...</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="c1">// &quot;System uses Neo4j&quot; has grounding 0.232 → INCLUDED (just above threshold)</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="c1">// Stricter query (grounding &gt;= 0.50)</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="c1">// ... calculate grounding_strength ...</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">50</span>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">c</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1">// &quot;System uses Neo4j&quot; has grounding 0.232 → EXCLUDED</span>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="c1">// Find weakly-grounded concepts</span>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">30</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="c1">// &quot;System uses Neo4j&quot; appears here for investigation</span>
</code></pre></div></p>
<p><strong>No concept modification needed</strong> - grounding_strength calculated dynamically at query time.</p>
<h3 id="example-2-multiple-thresholds-for-different-use-cases">Example 2: Multiple Thresholds for Different Use Cases</h3>
<p><strong>Scenario:</strong> Query with different grounding thresholds</p>
<p><strong>Concept states:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>&quot;Similarity threshold is 0.85&quot; → grounding: 0.90 (code + docs)
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>&quot;Similarity threshold is 0.75&quot; → grounding: 0.35 (old docs)
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>&quot;Similarity threshold is 0.80&quot; → grounding: 0.28 (mixed references)
</code></pre></div></p>
<p><strong>Query behaviors:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1">// High-confidence query (production use)</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">80</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="err">→</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Similarity threshold is 0.85&quot;</span><span class="w"> </span><span class="n">only</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="c1">// Medium-confidence query (general use)</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">50</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="err">→</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Similarity threshold is 0.85&quot;</span><span class="w"> </span><span class="n">only</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="c1">// Low-confidence query (include uncertain)</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">20</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="err">→</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="k">All</span><span class="w"> </span><span class="n">three</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="p">(</span><span class="n">investigation</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="c1">// Find contradictory concepts (analysis)</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">40</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="err">→</span><span class="w"> </span><span class="n">Returns</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0.75&quot;</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="s">&quot;0.80&quot;</span><span class="w"> </span><span class="n">concepts</span><span class="w"> </span><span class="p">(</span><span class="n">needs</span><span class="w"> </span><span class="n">investigation</span><span class="p">)</span>
</code></pre></div>
<p><strong>LLM receives context:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>High-grounding concept: &quot;Similarity threshold is 0.85&quot; (grounding: 0.90)
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>Weakly-grounded alternatives: &quot;0.75&quot; (grounding: 0.35), &quot;0.80&quot; (grounding: 0.28)
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>Synthesize response: &quot;What is the similarity threshold?&quot;
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>Expected: &quot;The system uses 0.85 as the similarity threshold (verified in code).&quot;
</code></pre></div></p>
<h3 id="example-3-automatic-reversibility-future-architecture-change">Example 3: Automatic Reversibility - Future Architecture Change</h3>
<p><strong>Current state (2025-10-24):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>&quot;System uses Neo4j&quot; → grounding: 0.232 (weakly grounded)
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>&quot;System uses Apache AGE&quot; → grounding: 0.901 (well grounded)
</code></pre></div></p>
<p><strong>Future ingestion (2026-06-01):</strong>
- New ADR: "ADR-089: Neo4j Enterprise for Multi-Region HA"
- Architecture docs: "PostgreSQL + AGE for single-region, Neo4j for geo-distributed"
- Deployment guides: "Neo4j cluster configuration"</p>
<p><strong>Automatic recalculation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>&quot;System uses Neo4j&quot;
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>  support_weight: 10.2 (old) + 29.75 (new) = 39.95
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>  contradict_weight: 33.84 (unchanged)
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>  grounding_strength: 39.95 / 73.79 = 0.541 (54% support - improved!)
</code></pre></div></p>
<p><strong>Query behavior automatically changes:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">// Before: grounding was 0.232</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">50</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="err">→</span><span class="w"> </span><span class="n">Excluded</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="c1">// After: grounding is 0.541</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">grounding_strength</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">50</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="err">→</span><span class="w"> </span><span class="n">Included</span><span class="w"> </span><span class="p">(</span><span class="n">automatically</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">manual</span><span class="w"> </span><span class="n">intervention</span><span class="err">!</span><span class="p">)</span>
</code></pre></div></p>
<p><strong>Developer investigates:</strong>
- Runs: <code>kg admin grounding-analysis</code>
- Finds: Both "Neo4j" (0.541) and "Apache AGE" (0.901) have good grounding
- Realizes: Context matters - both are true in different scenarios</p>
<p><strong>Solution (concept refinement):</strong>
- Split concept: "System uses Neo4j" → two more specific concepts
  - "System uses Neo4j for geo-distributed deployment" (grounding: 0.89)
  - "System uses Apache AGE for single-region deployment" (grounding: 0.92)
- Both well-grounded, no contradiction, clearer semantics</p>
<h2 id="consequences">Consequences</h2>
<h3 id="positive">Positive</h3>
<p>✅ <strong>Always current:</strong> Grounding strength reflects latest edge weights at every query
✅ <strong>No state management:</strong> No marking/unmarking, no status fields, no timestamps
✅ <strong>Automatic reversibility:</strong> Truth shifts automatically as evidence accumulates
✅ <strong>No query paradox:</strong> Lowering threshold always finds weakly-grounded concepts
✅ <strong>Continuous scores:</strong> 0.0-1.0 range, not binary relevant/irrelevant
✅ <strong>Adjustable filtering:</strong> Different queries use different thresholds (0.20, 0.50, 0.80)
✅ <strong>Pure mathematics:</strong> Core mechanism requires no agent or human intervention
✅ <strong>Statistical soundness:</strong> Grounded in force vector summing (confidence weights)
✅ <strong>Non-destructive:</strong> All concepts preserved, filtering happens at query time
✅ <strong>Philosophically sound:</strong> Acknowledges Gödelian incompleteness through continuous probability
✅ <strong>Performance:</strong> Can cache grounding_strength for frequently-queried concepts (optional)
✅ <strong>No cascading updates:</strong> Each concept's score is independent</p>
<h3 id="negative">Negative</h3>
<p>⚠️ <strong>Query overhead:</strong> Must calculate grounding_strength for each concept (mitigated by caching)
⚠️ <strong>Threshold selection:</strong> Default 0.20 may not suit all domains or queries
⚠️ <strong>No explicit marking:</strong> Concepts don't have "this is wrong" labels (feature, not bug)
⚠️ <strong>Agent context optional:</strong> LLMs don't get interpretive context unless explicitly requested
⚠️ <strong>Temporal information lost:</strong> Can't track "when did grounding drop below threshold?"</p>
<h3 id="trade-offs">Trade-offs</h3>
<p><strong>Computation vs Storage:</strong>
- <strong>Query-time calculation:</strong> No storage overhead, always current, but adds query latency
- <strong>Cached grounding:</strong> Faster queries, but cache invalidation complexity
- <strong>Current choice:</strong> Query-time (prefer correctness over speed initially)</p>
<p><strong>Threshold Flexibility vs Consistency:</strong>
- <strong>Adjustable thresholds:</strong> Different queries use different confidence levels (flexible)
- <strong>Fixed threshold:</strong> All queries use same standard (consistent)
- <strong>Current choice:</strong> Adjustable per query (0.20 default, user can override)</p>
<p><strong>Pure Math vs Agent Context:</strong>
- <strong>Pure math:</strong> Fast, deterministic, no API costs, but no interpretation
- <strong>With agent:</strong> Interpretive context for LLMs, but API costs and latency
- <strong>Current choice:</strong> Pure math by default, agent context optional enhancement</p>
<p><strong>Continuous Scores vs Binary Labels:</strong>
- <strong>Continuous (0.0-1.0):</strong> Nuanced, flexible filtering, but harder to understand at a glance
- <strong>Binary (relevant/irrelevant):</strong> Simple, clear, but loses information about degree of grounding
- <strong>Current choice:</strong> Continuous (preserves information, enables flexible querying)</p>
<h2 id="alternatives-considered">Alternatives Considered</h2>
<h3 id="1-temporal-versioning-rejected">1. Temporal Versioning (Rejected)</h3>
<p><strong>Approach:</strong> Track concept versions with timestamps, always use newest</p>
<p><strong>Why rejected:</strong>
- Doesn't handle out-of-order ingestion (old docs ingested after new ones)
- Doesn't account for evidence strength
- Still requires deciding "which version is authoritative?"</p>
<h3 id="2-source-authority-ranking-rejected">2. Source Authority Ranking (Rejected)</h3>
<p><strong>Approach:</strong> Rank sources (codebase &gt; ADRs &gt; docs &gt; notes), trust higher-ranked</p>
<p><strong>Why rejected:</strong>
- Requires manual source classification
- Brittle: source authority can shift
- Doesn't handle cross-source contradictions well</p>
<h3 id="3-majority-vote-rejected">3. Majority Vote (Rejected)</h3>
<p><strong>Approach:</strong> Simple count: most edges wins</p>
<p><strong>Why rejected:</strong>
- One high-quality source should outweigh many low-quality ones
- Doesn't account for confidence scores
- No way to handle ties</p>
<h3 id="4-bayesian-belief-networks-considered">4. Bayesian Belief Networks (Considered)</h3>
<p><strong>Approach:</strong> Model concepts as probability distributions, update with Bayes' theorem</p>
<p><strong>Why deferred:</strong>
- Mathematically elegant but complex to implement
- Requires prior probability estimates
- May revisit in Phase 3 if edge-count approach proves insufficient</p>
<h3 id="5-static-irrelevant-marking-rejected">5. Static IRRELEVANT Marking (Rejected)</h3>
<p><strong>Approach:</strong> Mark concepts as IRRELEVANT when contradiction ratio ≥ 0.80, exclude from default queries</p>
<p><strong>Implementation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="p">(:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="w">  </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;IRRELEVANT&quot;</span><span class="p">,</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">  </span><span class="n">marked_date</span><span class="p">:</span><span class="w"> </span><span class="n">timestamp</span><span class="p">,</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">  </span><span class="n">marked_reason</span><span class="p">:</span><span class="w"> </span><span class="n">text</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="p">})</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="c1">// Queries</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="p">&lt;&gt;</span><span class="w"> </span><span class="s">&#39;IRRELEVANT&#39;</span><span class="w"> </span><span class="n">OR</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="n">status</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span>
</code></pre></div></p>
<p><strong>Why rejected:</strong></p>
<p>❌ <strong>Query paradox:</strong> If we exclude IRRELEVANT concepts from queries, how do we find them to re-evaluate when new evidence arrives?</p>
<p>❌ <strong>Stale state:</strong> Marking freezes a point-in-time decision, but edges continue to accumulate. A concept marked IRRELEVANT yesterday might become relevant today.</p>
<p>❌ <strong>State management complexity:</strong> Need to track marked_date, marked_reason, reinstated_date, reinstated_reason - significant bookkeeping overhead.</p>
<p>❌ <strong>Cascading updates:</strong> When reinstating a concept, must trigger re-evaluation of adjacent concepts - complex dependency management.</p>
<p>❌ <strong>Binary thinking:</strong> Either RELEVANT or IRRELEVANT - loses nuance. What about concepts with 40% support? 60% support?</p>
<p>❌ <strong>Agent dependency:</strong> Requires agent introspection for every mark/unmark operation - API costs and latency.</p>
<p><strong>Dynamic grounding_strength solves all these problems:</strong>
- ✅ Always findable (just lower threshold)
- ✅ Always current (recalculated at query time)
- ✅ No state management (no bookkeeping)
- ✅ No cascading (independent scores)
- ✅ Continuous spectrum (0.0-1.0)
- ✅ Pure mathematics (no agent required)</p>
<h2 id="related-decisions">Related Decisions</h2>
<ul>
<li><strong>ADR-025:</strong> Dynamic relationship vocabulary - establishes CONTRADICTS edge type</li>
<li><strong>ADR-030:</strong> Concept deduplication - prevents duplicate concepts, complements contradiction resolution</li>
<li><strong>ADR-032:</strong> Confidence thresholds - similar statistical approach for relationship confidence</li>
<li><strong>ADR-002:</strong> Node fitness scoring - early concept quality metrics</li>
</ul>
<h2 id="future-considerations">Future Considerations</h2>
<h3 id="1-weighted-edge-confidence">1. Weighted Edge Confidence</h3>
<p>Not all CONTRADICTS edges are equal:
- Code contradiction (confidence: 0.95) &gt; Documentation contradiction (confidence: 0.70)
- Weight edges by confidence scores in ratio calculation</p>
<h3 id="2-temporal-decay">2. Temporal Decay</h3>
<p>Older evidence may be less relevant:
- Apply decay function: <code>weight = base_confidence * e^(-λt)</code>
- Recent evidence weighted higher automatically</p>
<h3 id="3-cross-ontology-contradiction-detection">3. Cross-Ontology Contradiction Detection</h3>
<p>Current design: operates within single ontology
Future: detect contradictions across ontologies
- "Project A says X" vs "Project B says not-X"
- May indicate domain-specific variation, not true contradiction</p>
<h3 id="4-contradiction-cascade-visualization">4. Contradiction Cascade Visualization</h3>
<p>Build UI showing:
- Concept with high contradiction ratio
- Visual network of SUPPORTS vs CONTRADICTS edges
- Agent reasoning explanation
- Timeline of evidence accumulation</p>
<h3 id="5-automated-concept-refinement">5. Automated Concept Refinement</h3>
<p>When contradictions persist even after introspection:
- Agent suggests concept split (Example 3 above)
- "System uses Neo4j" → two more specific concepts
- Reduces spurious contradictions</p>
<h2 id="references">References</h2>
<ul>
<li><strong>Darwin Gödel Machine:</strong> Zhang, J., Hu, S., Lu, C., Lange, R., Clune, J. "Darwin Gödel Machine: Open-Ended Evolution of Self-Improving Agents" (2025) - https://arxiv.org/abs/2505.22954</li>
<li><strong>Original Gödel Machine:</strong> Schmidhuber, J. "Gödel Machines: Fully Self-Referential Optimal Universal Self-Improvers" (2007) - https://arxiv.org/abs/cs/0309048</li>
<li><strong>Gödel's Incompleteness Theorems:</strong> https://plato.stanford.edu/entries/goedel-incompleteness/</li>
<li><strong>Evolutionary Epistemology:</strong> Campbell, Donald T. "Evolutionary Epistemology" (1974)</li>
<li><strong>Statistical Significance (Three Sigma Rule):</strong> https://en.wikipedia.org/wiki/68%E2%80%9395%E2%80%9399.7_rule</li>
<li><strong>Bayesian Belief Networks:</strong> Pearl, Judea. "Probabilistic Reasoning in Intelligent Systems" (1988)</li>
<li><strong>Neo4j → Apache AGE example:</strong> This conversation (2025-10-24)</li>
<li><strong>Project page:</strong> https://sakana.ai/dgm/</li>
<li><strong>Code repository:</strong> https://github.com/jennyzzt/dgm</li>
</ul>
<h2 id="validation-testing">Validation &amp; Testing</h2>
<h3 id="test-scenarios">Test Scenarios</h3>
<p><strong>1. Dynamic Grounding Calculation (Neo4j example)</strong>
- Ingest 12 Neo4j references → concept created
- Calculate grounding_strength: verify <code>grounding_strength ≈ 1.0</code> (fully supported, no contradictions)
- Ingest 47 Apache AGE references with CONTRADICTS edges
- Recalculate grounding_strength: verify <code>grounding_strength ≈ 0.232</code> (23% support, 77% contradiction)
- Verify: grounding_strength calculation uses weighted sums, not edge counts
- Verify: total_weight = support_weight + contradict_weight ≈ 44.04</p>
<p><strong>2. Query Threshold Filtering (Default threshold = 0.20)</strong>
- Query with default threshold (min_grounding=0.20)
- Verify: Neo4j concept INCLUDED (grounding 0.232 &gt; 0.20 threshold)
- Query with stricter threshold (min_grounding=0.30)
- Verify: Neo4j concept EXCLUDED (grounding 0.232 &lt; 0.30 threshold)
- Query with lenient threshold (min_grounding=0.10)
- Verify: Neo4j concept INCLUDED (grounding 0.232 &gt; 0.10 threshold)</p>
<p><strong>3. Automatic Reversal (No Manual Intervention)</strong>
- Initial state: Neo4j concept has grounding_strength = 0.232
- Ingest 40 new documents with SUPPORTS edges for Neo4j (future architecture change)
- Recalculate grounding_strength: verify <code>grounding_strength ≈ 0.541</code> (54% support)
- Query with threshold (min_grounding=0.50)
- Verify: Neo4j concept now INCLUDED (automatic, no marking/unmarking needed)
- Verify: No agent interaction required for reversal</p>
<p><strong>4. Weakly-Grounded Concept Analysis</strong>
- Query for concepts with grounding_strength &lt; 0.30
- Verify: Returns concepts that may need investigation
- Verify: Concepts remain in graph (non-destructive)
- Optional: Generate agent context for interpretation
- Verify: Agent provides context but doesn't modify graph structure</p>
<p><strong>5. Performance Testing</strong>
- Run grounding_strength calculation on 1000 concepts
- Verify: Query completes in &lt;100ms (depth=1 complexity)
- Measure: Average grounding_strength across all concepts
- Verify: Distribution histogram shows reasonable spread (not all 1.0 or 0.0)</p>
<p><strong>6. Edge Confidence Weighting</strong>
- Create concept with 10 SUPPORTS edges (confidence 0.9 each) = 9.0 weight
- Create concept with 50 CONTRADICTS edges (confidence 0.2 each) = 10.0 weight
- Calculate grounding_strength: verify ≈ 0.474 (9.0 / 19.0)
- Verify: High-confidence supports outweigh low-confidence contradictions
- Verify: Weighted approach prevents count-based gaming</p>
<h3 id="metrics-to-track">Metrics to Track</h3>
<ul>
<li><strong>Grounding distribution:</strong> Histogram of grounding_strength values (0.0-1.0)</li>
<li><strong>Query performance:</strong> Average calculation time for grounding_strength (target: &lt;50ms)</li>
<li><strong>Threshold effectiveness:</strong> % of concepts filtered at different thresholds (0.10, 0.20, 0.30, 0.50)</li>
<li><strong>Reversal frequency:</strong> How often grounding_strength crosses thresholds over time</li>
<li><strong>Edge weight distribution:</strong> Average confidence scores for SUPPORTS vs CONTRADICTS edges</li>
<li><strong>Cache hit rate:</strong> If caching implemented (Phase 3), track cache effectiveness</li>
</ul>
<h2 id="implementation-status">Implementation Status</h2>
<p><strong>BLOCKED:</strong> Requires ADR-045 (Unified Embedding Generation) to be implemented first.</p>
<p><strong>ADR-045 Prerequisites:</strong>
- [ ] Phase 1: Implement EmbeddingWorker service
- [ ] Phase 2: Initialize embeddings for 30 builtin types
- [ ] Phase 3: Verify all vocabulary types have embeddings</p>
<p><strong>Once ADR-045 Complete:</strong>
- [ ] Phase 1: Embedding-Based Grounding Calculation
  - [ ] Implement <code>calculate_grounding_strength_semantic()</code> in AGEClient
  - [ ] Use embedding similarity instead of hard-coded polarity
  - [ ] Add <code>min_grounding</code> parameter to query API endpoints
  - [ ] Add grounding_strength to concept query responses
  - [ ] Add admin endpoint: <code>GET /admin/grounding-analysis</code> (list weakly-grounded concepts)
  - [ ] Validate with production edge types (SUPPORTS, ENABLES, etc.)
- [ ] Phase 2: API Integration
  - [ ] Update ConceptDetailsResponse model with grounding_strength field
  - [ ] Update concept details endpoint to calculate grounding
  - [ ] Update search endpoint to optionally include grounding
  - [ ] Update TypeScript types and MCP tools
- [ ] Phase 3: Agent Context Generation (Optional Enhancement)
  - [ ] Build agent context generation prompt
  - [ ] Implement <code>POST /admin/agent-context/{concept_id}</code> endpoint
  - [ ] Add temporal analysis logic (historical vs current)
  - [ ] Add alternative concept suggestion (higher grounding)
- [ ] Phase 4: Performance Optimization (Future)
  - [ ] Implement optional caching strategy (materialized grounding_strength)
  - [ ] Add cache invalidation on edge changes
  - [ ] Build monitoring dashboard for grounding distribution
  - [ ] Add grounding_strength trend tracking (temporal analysis)</p>
<p><strong>Next Steps:</strong>
1. <strong>Implement ADR-045 first</strong> (unified embedding generation)
2. Initialize embeddings for builtin vocabulary types
3. Implement embedding-based grounding calculation
4. Test with production edge types (SUPPORTS, ENABLES, ENHANCES, etc.)
5. Gather metrics on grounding distribution in production graph</p>
<hr />
<p><strong>Last Updated:</strong> 2025-10-25 (Added ADR-045 dependency and embedding-based approach)
<strong>Next Review:</strong> After ADR-045 implementation</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.indexes", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>