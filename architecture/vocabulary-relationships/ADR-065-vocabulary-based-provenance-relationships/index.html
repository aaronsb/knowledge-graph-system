
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Multi-dimensional knowledge extraction system using Apache AGE">
      
      
        <meta name="author" content="Knowledge Graph System Contributors">
      
      
      
        <link rel="prev" href="../ADR-059-llm-determined-relationship-direction/">
      
      
        <link rel="next" href="../ADR-077-vocabulary-explorers/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>ADR-065: Vocabulary-Based Provenance Relationships - Knowledge Graph System</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#adr-065-vocabulary-based-provenance-relationships" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Knowledge Graph System" class="md-header__button md-logo" aria-label="Knowledge Graph System" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Knowledge Graph System
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ADR-065: Vocabulary-Based Provenance Relationships
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aaronsb/knowledge-graph-system" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    aaronsb/knowledge-graph-system
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Knowledge Graph System" class="md-nav__button md-logo" aria-label="Knowledge Graph System" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Knowledge Graph System
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aaronsb/knowledge-graph-system" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    aaronsb/knowledge-graph-system
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation Index
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/COLD-START.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5-Minute Cold Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/DEPLOYMENT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/FUSE_FILESYSTEM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FUSE Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../guides/VOCABULARY_CATEGORIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vocabulary Categories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Manual
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Manual
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Graph System Manual
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/00-introduction/01-WHAT_AND_WHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is the Knowledge Graph System?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/01-getting-started/02-CLI_USAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg CLI Usage Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/01-getting-started/03-INGESTION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ingesting Documents
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Configuration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/01-AI_PROVIDERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Provider Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/02-EXTRACTION_CONFIGURATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Extraction Configuration Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/03-EMBEDDING_CONFIGURATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embedding Configuration Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/04-SWITCHING_EXTRACTION_PROVIDERS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Switching Extraction Providers - Quick Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/05-LOCAL_INFERENCE_IMPLEMENTATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local LLM Inference Implementation Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/02-configuration/06-EXTRACTION_QUALITY_COMPARISON/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Extraction Quality Comparison
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/03-integration/01-MCP_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Server Setup Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/03-integration/02-VOCABULARY_CONSOLIDATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Edge Vocabulary Consolidation Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Security & Access
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Security & Access
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/04-security-and-access/01-AUTHENTICATION/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/04-security-and-access/02-RBAC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RBAC Operations Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/04-security-and-access/03-SECURITY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Security Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/04-security-and-access/04-PASSWORD_RECOVERY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Password Recovery and Account Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Maintenance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Maintenance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/05-maintenance/01-BACKUP_RESTORE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Backup and Restore Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/05-maintenance/02-DATABASE_MIGRATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Database Migrations Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/01-SCHEMA_REFERENCE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Schema Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/02-USE_CASES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use Cases: Practical Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/03-EXAMPLES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples: Real Queries, Real Results
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/04-github_project_history/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GitHub Project History Analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/05-CONCEPTS_AND_TERMINOLOGY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concepts and Terminology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/06-CONCEPT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Concept: Why Knowledge Graphs, Not Just RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/07-ENRICHMENT_JOURNEY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Enrichment Journey: From Empty Graph to Multi-Perspective Understanding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/08-DISTRIBUTED_SHARDING_RESEARCH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distributed Graph Database Sharding: Research and Architectural Patterns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/09-CYPHER_PATTERNS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Cypher Query Patterns for Apache AGE
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/10-OPENCYPHER_QUERIES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    openCypher Query Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../manual/06-reference/11-LLM_EDGE_DISCOVERY_FLOW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LLM Edge Discovery Flow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tool Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tool Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool &amp; API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    CLI Commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI Commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI Command Reference (Auto-Generated)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2_2" id="__nav_4_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    commands
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    commands
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/admin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg admin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg database
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/health/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg health
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/ingest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg ingest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg job
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/login/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg login
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/logout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg logout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/oauth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg oauth
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/ontology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg ontology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/commands/vocabulary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    kg vocabulary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_3" >
        
          
          <label class="md-nav__link" for="__nav_4_2_3" id="__nav_4_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    media
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    media
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/cli/media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Media Assets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    MCP Tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    MCP Tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Server Tool Reference (Auto-Generated)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_2" >
        
          
          <label class="md-nav__link" for="__nav_4_3_2" id="__nav_4_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    media
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    media
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/media/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Media Assets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3_3" id="__nav_4_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    tools
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    tools
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/analyze_polarity_axis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    analyze_polarity_axis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/artifact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    artifact
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    concept
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/document/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    document
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/epistemic_status/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    epistemic_status
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/ingest-directory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ingest-directory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/ingest-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ingest-file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/ingest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ingest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/inspect-file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    inspect-file
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    job
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/ontology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ontology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/mcp/tools/source/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    source
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    REST API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/api/ADMIN-ENDPOINTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Endpoints Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    REST API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INDEX/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture Decision Records
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    access-workflow
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    access-workflow
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-001-multi-tier-agent-access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-001: Multi-Tier Agent Access Model
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-002-node-fitness-scoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-002: Node Fitness Scoring System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-003-semantic-tool-hints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-003: Semantic Tool Hint Networks
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-004-pure-graph-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-004: Pure Graph Design (Library Metaphor)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-005-source-text-tracking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-005: Source Text Tracking and Retrieval
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-006-staging-migration-workflows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-006: Staging and Migration Workflows
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-038-official-project-apparel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-038: Official Project Apparel Design Specifications
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-087-documentation-strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-087: Documentation Strategy and Audience Framework
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../access-workflow/ADR-900-adr-numbering-domain-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-900: ADR Numbering Domain System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ai-embeddings
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ai-embeddings
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-039-local-embedding-service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-039: Local Embedding Service with Hybrid Client/Server Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-041-ai-extraction-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-041: AI Extraction Provider Configuration
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-042-local-extraction-inference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-042: Local LLM Inference for Concept Extraction
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-043-single-node-resource-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-043: Single-Node Resource Management for Local Inference
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-044-probabilistic-truth-convergence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-044: Probabilistic Truth Convergence Through Contradiction Resolution
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-045-unified-embedding-generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-045: Unified Embedding Generation System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-049-rate-limiting-and-concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-049: Rate Limiting and Per-Provider Concurrency Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-058-polarity-axis-triangulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-058: Polarity Axis Triangulation for Grounding Calculation
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-068-source-text-embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-068: Source Text Embeddings for Grounding Truth Retrieval
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/ADR-070-polarity-axis-analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-070: Polarity Axis Analysis for Bidirectional Semantic Dimensions
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3_11" >
        
          
          <label class="md-nav__link" for="__nav_6_3_11" id="__nav_6_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    media-ADR-058
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    media-ADR-058
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai-embeddings/media-ADR-058/README_VISUALIZATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Polarity Axis Triangulation Visualizations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    authentication-security
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    authentication-security
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-017-sensitive-auth-verification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-017: Client-Initiated Token Revocation for Elevated Operations
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-027-user-management-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-027: User Management API with Lightweight JWT Authentication
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Superseded"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-028-dynamic-rbac-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-028: Dynamic Role-Based Access Control (RBAC) System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-031-encrypted-api-key-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-031: Encrypted API Key Storage with Container Secrets
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-054-oauth-client-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-054: OAuth 2.0 Client Management for Multi-Client Authentication
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-060-endpoint-security-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-060: API Endpoint Security Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-062-mcp-file-ingestion-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-062: MCP File Ingestion Security Model
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-074-platform-admin-role/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-074: Platform Admin Role
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication-security/ADR-082-user-scoping-artifact-ownership/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-082: User Scoping and Artifact Ownership Model
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5" >
        
          
          <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    database-schema
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    database-schema
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database-schema/ADR-016-apache-age-migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-016: Apache AGE Migration (Neo4j Replacement)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database-schema/ADR-024-multi-schema-postgresql-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-024: Multi-Schema PostgreSQL Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database-schema/ADR-040-database-schema-migrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-040: Database Schema Migration Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database-schema/ADR-061-operator-pattern-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-061: Operator Pattern for Platform Lifecycle Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_6" >
        
          
          <label class="md-nav__link" for="__nav_6_6" id="__nav_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    infrastructure
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    infrastructure
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-012-api-server-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-012: API Server Architecture for Scalable Neo4j Access
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-015-backup-restore-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-015: Backup/Restore Streaming Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-018-server-sent-events-streaming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-018: Server-Sent Events for Real-Time Progress Streaming
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-020-admin-module-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-020: Admin Module Architecture Pattern
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-021-live-man-switch-ai-safety/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-021: Live Man Switch - AI Safety for Critical Operations
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Superseded"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-050-scheduled-jobs-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-050: Scheduled Jobs System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-055-cdn-serverless-deployment-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-055: CDN and Serverless Deployment Model
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-056-timezone-aware-datetime-utilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-056: Timezone-Aware Datetime Utilities
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-079-projection-artifact-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-079: Projection Artifact Storage in Garage
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-080-garage-service-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-080: Garage Service Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-083-artifact-persistence-pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-083: Artifact Persistence Pattern
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-086-deployment-topology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-086: Deployment Topology (Dev/Stable Split)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infrastructure/ADR-088-semantic-election-protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-088: Semantic Election Protocol for Distributed Concept Placement
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7" >
        
          
          <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ingestion-content
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    ingestion-content
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-014-job-approval-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-014: Job Approval Workflow with Pre-Ingestion Analysis
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-023-markdown-structured-content-preprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-023: Markdown Structured Content Preprocessing
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-033-multimodal-ingestion-configurable-prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-033: Multimodal Image Ingestion with Configurable Prompt System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-037-human-guided-graph-editing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-037: Human-Guided Graph Editing
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-051.1-graph-document-deduplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-051: Graph-Based Provenance Tracking
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-051.2-api-changes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-051: API Changes for Graph-Based Document Deduplication
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-057.1-multimodal-image-ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-057: Multimodal Image Ingestion with Visual Context Injection
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-057.2-appendix-single-vs-two-stage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-057.2: Appendix: Single-Stage vs Two-Stage Image Processing
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-072-concept-matching-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-072: Concept Matching Strategies and Configuration
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-081-source-document-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-081: Source Document Lifecycle
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ingestion-content/ADR-089-deterministic-node-edge-creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-089: Deterministic Node and Edge Creation
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_8" >
        
          
          <label class="md-nav__link" for="__nav_6_8" id="__nav_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    query-search
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    query-search
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-030-concept-deduplication-validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-030: Concept Deduplication Quality Validation
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-063-semantic-diversity-authenticity-signal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-063: Semantic Diversity as Authenticity Signal
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-066-published-query-endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-066: Published Query Endpoints
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-071-parallel-graph-queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-071: Parallel Graph Query Optimization
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-071.1-parallel-implementation-findings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-071.1: Parallel Graph Query Implementation Findings
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-076-pathfinding-optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-076: Pathfinding Optimization for Apache AGE
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-076.1-pathfinding-baseline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-076.1: Pathfinding Performance Baseline
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../query-search/ADR-084-document-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-084: Document-Level Search
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9" >
        
          
          <label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    user-interfaces
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    user-interfaces
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-011-cli-admin-separation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-011: CLI and Admin Tooling Separation
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-013-unified-typescript-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-013: Unified TypeScript Client (CLI + MCP Server)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-019-type-based-table-formatting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-019: Type-Based Table Formatting System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-029-cli-theory-of-operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-029: CLI Theory of Operation - Hybrid Unix/Domain-Specific Design
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-034-graph-visualization-query-workbench/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-034: Graph Visualization &amp; Interactive Query Explorers
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-035-explorer-methods-uses-capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-035: Explorer Methods, Uses, and Capabilities
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-036-universal-visual-query-builder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-036: Universal Visual Query Builder
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-064-specialized-truth-convergence-visualizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-064: Specialized Truth Convergence Visualizations
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-067-web-app-workstation-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-067: Web Application Workstation Architecture
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-069-semantic-fuse-filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-069: Semantic FUSE Filesystem
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-069.1-fuse-implementation-specifics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-069.1: FUSE Driver Implementation Specifics
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-interfaces/ADR-075-postmodern-theme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-075: Postmodern Theme System
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10" >
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    visualization
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    visualization
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualization/ADR-078-embedding-landscape-explorer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-078: Embedding Landscape Explorer
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../visualization/ADR-085-document-explorer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-085: Document Explorer with Radial Concept Visualization
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11" checked>
        
          
          <label class="md-nav__link" for="__nav_6_11" id="__nav_6_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    vocabulary-relationships
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    vocabulary-relationships
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-022-semantic-relationship-taxonomy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-022: Semantically Sparse 30-Type Relationship Taxonomy
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-025-dynamic-relationship-vocabulary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-025: Dynamic Relationship Vocabulary Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-026-autonomous-vocabulary-curation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-026: Autonomous Vocabulary Curation and Ontology Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-032.1-automatic-edge-vocabulary-expansion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-032: Automatic Edge Vocabulary Expansion with Intelligent Pruning
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-032.2-implementation-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-032.2: Implementation Quick Reference
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-046-grounding-aware-vocabulary-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-046: Grounding-Aware Vocabulary Management
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-047-probabilistic-vocabulary-categorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-047: Probabilistic Vocabulary Categorization
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-048-vocabulary-metadata-as-graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-048: Vocabulary Metadata as First-Class Graph
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-052-vocabulary-expansion-consolidation-cycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-052: Vocabulary Expansion-Consolidation Cycle (The "Dreaming" Pattern)
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-053-eager-vocabulary-categorization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-053: Eager Vocabulary Categorization
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-059-llm-determined-relationship-direction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-059: LLM-Determined Relationship Direction Semantics
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Proposed"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    ADR-065: Vocabulary-Based Provenance Relationships
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-065: Vocabulary-Based Provenance Relationships
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Accepted"></span>
  

  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-architecture-hardcoded-structural-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Architecture: Hardcoded Structural Relationships
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-inconsistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Inconsistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architectural-realization-from-boolean-to-probabilistic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural Realization: From Boolean to Probabilistic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architectural Realization: From Boolean to Probabilistic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-emergent-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Emergent Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-shift-from-boolean-to-probabilistic" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Shift from Boolean to Probabilistic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-operations-on-graph-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Operations on Graph Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-happened" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why This Happened
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-this-means-architecturally" class="md-nav__link">
    <span class="md-ellipsis">
      
        What This Means Architecturally
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-of-vector-operations-in-the-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples of Vector Operations in the Graph
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-embrace-the-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision: Embrace the Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-principle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Principle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-appears-as-vocabulary-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: APPEARS as Vocabulary Cluster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polarity-axis-for-appearance-strength" class="md-nav__link">
    <span class="md-ellipsis">
      
        Polarity Axis for Appearance Strength
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-emergent-types-not-hardcoded" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage: Emergent Types, Not Hardcoded
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-infrastructure-transparent-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Infrastructure (Transparent Migration)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-graphqueryfacade-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: GraphQueryFacade Enhancement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-vocabulary-cluster-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Vocabulary Cluster Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benefits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#costs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Costs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mitigations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mitigations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-question-llm-interface-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open Question: LLM Interface Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Open Question: LLM Interface Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem Statement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interface Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interface Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-zero-llm-involvement-pure-structural-inference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 1: Zero LLM Involvement (Pure Structural Inference)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-simple-categorical-hint-recommended-balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 2: Simple Categorical Hint (Recommended Balance)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-domain-specific-semantic-characterization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 3: Domain-Specific Semantic Characterization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-4-natural-language-description-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 4: Natural Language Description + Parsing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evaluation Criteria
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendation-hybrid-approach-option-1-optional-option-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommendation: Hybrid Approach (Option 1 + Optional Option 2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-agnostic-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain-Agnostic Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-questions-for-further-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open Questions for Further Discussion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision Timeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives-considered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternatives Considered
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternatives Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-1-keep-appears-hardcoded-add-properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 1: Keep APPEARS Hardcoded, Add Properties
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-2-llm-explicit-characterization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 2: LLM Explicit Characterization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-3-post-processing-enrichment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 3: Post-Processing Enrichment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-work-epistemic-status-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Work: Epistemic Status Classification
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Work: Epistemic Status Classification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formal-connections-to-kg-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        Formal Connections to KG Research
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phased-exploration-non-breaking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phased Exploration (Non-Breaking)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-phased-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benefits of Phased Approach
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Plan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ADR-077-vocabulary-explorers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ADR-077: Vocabulary Explorers
  

    
  </span>
  
  
    
  
  
    <span class="md-status md-status--Draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Testing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/API_AUTH_AUDIT_RESULTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Endpoint Authentication Audit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/API_AUTH_AUDIT_SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Authentication Audit Summary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/API_AUTH_TESTING_RESEARCH/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Authentication Testing Research
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/INTEGRATION_TEST_NOTES/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration Test Notes - Working Commands &amp; Observations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/INTEGRATION_TEST_PLAN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Knowledge Graph System - Integration Test Plan
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/SCHEMA_MIGRATION_TEST_REPORT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL Schema Migration - Functional Test Report
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../testing/TEST_COVERAGE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test Coverage Areas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current-architecture-hardcoded-structural-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Current Architecture: Hardcoded Structural Relationships
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-inconsistency" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Inconsistency
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architectural-realization-from-boolean-to-probabilistic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Architectural Realization: From Boolean to Probabilistic
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architectural Realization: From Boolean to Probabilistic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-emergent-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Emergent Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-shift-from-boolean-to-probabilistic" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Shift from Boolean to Probabilistic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vector-operations-on-graph-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Vector Operations on Graph Structure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-happened" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why This Happened
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-this-means-architecturally" class="md-nav__link">
    <span class="md-ellipsis">
      
        What This Means Architecturally
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples-of-vector-operations-in-the-graph" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples of Vector Operations in the Graph
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implications" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implications
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-embrace-the-pattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision: Embrace the Pattern
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-principle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Principle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pattern-appears-as-vocabulary-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern: APPEARS as Vocabulary Cluster
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polarity-axis-for-appearance-strength" class="md-nav__link">
    <span class="md-ellipsis">
      
        Polarity Axis for Appearance Strength
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-emergent-types-not-hardcoded" class="md-nav__link">
    <span class="md-ellipsis">
      
        Storage: Emergent Types, Not Hardcoded
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phase-1-infrastructure-transparent-migration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 1: Infrastructure (Transparent Migration)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-2-graphqueryfacade-enhancement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 2: GraphQueryFacade Enhancement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phase-3-vocabulary-cluster-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phase 3: Vocabulary Cluster Management
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Consequences">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#benefits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benefits
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#costs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Costs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mitigations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mitigations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#open-question-llm-interface-design" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open Question: LLM Interface Design
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Open Question: LLM Interface Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-statement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem Statement
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Interface Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interface Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-zero-llm-involvement-pure-structural-inference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 1: Zero LLM Involvement (Pure Structural Inference)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-simple-categorical-hint-recommended-balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 2: Simple Categorical Hint (Recommended Balance)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-domain-specific-semantic-characterization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 3: Domain-Specific Semantic Characterization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-4-natural-language-description-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option 4: Natural Language Description + Parsing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evaluation Criteria
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recommendation-hybrid-approach-option-1-optional-option-2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommendation: Hybrid Approach (Option 1 + Optional Option 2)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#domain-agnostic-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain-Agnostic Examples
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#open-questions-for-further-discussion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Open Questions for Further Discussion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-timeline" class="md-nav__link">
    <span class="md-ellipsis">
      
        Decision Timeline
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternatives-considered" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternatives Considered
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Alternatives Considered">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alternative-1-keep-appears-hardcoded-add-properties" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 1: Keep APPEARS Hardcoded, Add Properties
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-2-llm-explicit-characterization" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 2: LLM Explicit Characterization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-3-post-processing-enrichment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Alternative 3: Post-Processing Enrichment
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-work-epistemic-status-classification" class="md-nav__link">
    <span class="md-ellipsis">
      
        Future Work: Epistemic Status Classification
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Work: Epistemic Status Classification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#formal-connections-to-kg-research" class="md-nav__link">
    <span class="md-ellipsis">
      
        Formal Connections to KG Research
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phased-exploration-non-breaking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Phased Exploration (Non-Breaking)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-phased-approach" class="md-nav__link">
    <span class="md-ellipsis">
      
        Benefits of Phased Approach
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-plan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Plan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="adr-065-vocabulary-based-provenance-relationships">ADR-065: Vocabulary-Based Provenance Relationships</h1>
<h2 id="overview">Overview</h2>
<p>Your knowledge graph tracks relationships between concepts (meditation ENABLES enlightenment) using rich, dynamic vocabulary. But it tracks relationships between concepts and their source documents using a single hardcoded type: APPEARS. This means you can't distinguish between a document that briefly mentions a concept versus one that explores it in depth, or between a text that predicts something versus one that fulfills a prediction. The architectural inconsistency is jarringconcept relationships get semantic richness, but source relationships are binary.</p>
<p>This ADR extends the dynamic vocabulary system to cover provenance relationships. Instead of just "concept APPEARS in source", the system can express "concept is CENTRAL_TO source", "concept is MENTIONED_IN source", or "concept is PROPHESIED_IN source". These types emerge and get managed using the same vocabulary infrastructure: automatic categorization, similarity-based clustering, consolidation of synonyms. The implementation can start simpleinfer appearance type from structural signals like quote length and frequencythen optionally enhance with AI judgment about prominence. Beyond solving the immediate consistency problem, this ADR represents an architectural revelation: through successive decisions to eliminate boolean logic in favor of probabilistic values, the system has evolved from "graph database with semantic enrichment" into a hybrid symbolic-tensor networkgraphs for structural queries, embeddings for semantic operations. Acknowledging this helps clarify design choices and opens up optimization opportunities, while maintaining the graph as the primary user-facing interface.</p>
<hr />
<h2 id="context">Context</h2>
<h3 id="current-architecture-hardcoded-structural-relationships">Current Architecture: Hardcoded Structural Relationships</h3>
<p>The system currently treats ConceptSource provenance relationships differently from ConceptConcept semantic relationships:</p>
<p><strong>ConceptConcept (vocabulary-based):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Dynamic relationship types from emergent vocabulary</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">:</span><span class="n">SUPPORTS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">:</span><span class="n">CONTRADICTS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c1</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">:</span><span class="n">IMPLIES</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1"># Stored in relationship_vocabulary table</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># - Embeddings for semantic matching</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># - LLM-discovered types normalized via relationship_mapper</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="c1"># - Polarity axis triangulation (ADR-058) for grounding</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># - Consolidation reduces similar types</span>
</code></pre></div></p>
<p><strong>ConceptSource (hardcoded):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Fixed structural relationship types</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">APPEARS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>          <span class="c1"># Hardcoded</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">EVIDENCED_BY</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>     <span class="c1"># Hardcoded</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">FROM_SOURCE</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>      <span class="c1"># Hardcoded</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># NOT in relationship_vocabulary table</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="c1"># No embeddings, no semantic matching</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># No variation, no discovery</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="c1"># Fixed in code (api/lib/serialization.py:799)</span>
</code></pre></div></p>
<h3 id="the-inconsistency">The Inconsistency</h3>
<p>This creates an architectural asymmetry:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>ConceptConcept</th>
<th>ConceptSource</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Relationship types</strong></td>
<td>Emergent from LLM</td>
<td>Hardcoded in code</td>
</tr>
<tr>
<td><strong>Vocabulary table</strong></td>
<td> Yes</td>
<td> No</td>
</tr>
<tr>
<td><strong>Embeddings</strong></td>
<td> Yes</td>
<td> No</td>
</tr>
<tr>
<td><strong>Semantic matching</strong></td>
<td> Threshold-based</td>
<td> Binary match</td>
</tr>
<tr>
<td><strong>Discovery</strong></td>
<td> LLM generates</td>
<td> Fixed types</td>
</tr>
<tr>
<td><strong>Consolidation</strong></td>
<td> Reduce similar</td>
<td> N/A</td>
</tr>
<tr>
<td><strong>Polarity axis</strong></td>
<td> ADR-058</td>
<td> N/A</td>
</tr>
<tr>
<td><strong>Nuance</strong></td>
<td> Gradient scores</td>
<td> Binary present/absent</td>
</tr>
</tbody>
</table>
<h3 id="the-problem">The Problem</h3>
<p><strong>Lack of semantic richness:</strong></p>
<p>Current system can only express that a concept "appears" in a source. No way to distinguish:
- Central vs tangential mentions
- Predictive vs retrospective references (prophesy vs fulfillment)
- Direct statements vs implied references
- Foundational themes vs peripheral topics</p>
<p><strong>Example: Biblical covenant tracing</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="err">--</span><span class="w"> </span><span class="n">Current</span><span class="w"> </span><span class="p">(</span><span class="k">all</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="p">):</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">APPEARS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Genesis_Chapter_15</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">APPEARS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Genesis_Chapter_17</span><span class="p">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">APPEARS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Exodus_Chapter_2</span><span class="p">)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="err">--</span><span class="w"> </span><span class="n">Desired</span><span class="w"> </span><span class="p">(</span><span class="n">semantic</span><span class="w"> </span><span class="n">variation</span><span class="p">):</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">CENTRAL_TO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Genesis_Chapter_15</span><span class="p">)</span><span class="w">       </span><span class="err">#</span><span class="w"> </span><span class="n">Foundational</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">PROPHESIED_IN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Genesis_Chapter_17</span><span class="p">)</span><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Predictive</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">(</span><span class="n">covenant_name</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">MENTIONED_IN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">Exodus_Chapter_2</span><span class="p">)</span><span class="w">       </span><span class="err">#</span><span class="w"> </span><span class="n">Reference</span>
</code></pre></div>
<p><strong>Query complexity:</strong></p>
<p>Users must manually filter by structural signals (quote length, instance count) rather than semantic characterization:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="err">--</span><span class="w"> </span><span class="n">Current</span><span class="p">:</span><span class="w"> </span><span class="n">Infer</span><span class="w"> </span><span class="n">centrality</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">count</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span><span class="o">-[</span><span class="p">:</span><span class="n">APPEARS</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="n">Source</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">WITH</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">(*)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">mentions</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">mentions</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">5</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">s</span><span class="w">  </span><span class="c1">// Probably central?</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="err">--</span><span class="w"> </span><span class="n">Desired</span><span class="p">:</span><span class="w"> </span><span class="n">Query</span><span class="w"> </span><span class="n">semantic</span><span class="w"> </span><span class="n">cluster</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="p">)</span><span class="o">-[</span><span class="n">r</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="n">Source</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="k">WHERE</span><span class="w"> </span><span class="n">type</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="err">$</span><span class="n">appearance_types</span><span class="w">  </span><span class="c1">// Similarity to APPEARS &gt; 0.75</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="n">AND</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">appearance_strength</span><span class="w"> </span><span class="p">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">5</span><span class="w">   </span><span class="c1">// Projection on centrality axis</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="k">RETURN</span><span class="w"> </span><span class="n">s</span>
</code></pre></div>
<hr />
<h2 id="architectural-realization-from-boolean-to-probabilistic">Architectural Realization: From Boolean to Probabilistic</h2>
<h3 id="the-emergent-pattern">The Emergent Pattern</h3>
<p>Through successive design decisionsvocabulary expansion-consolidation (ADR-052), polarity axis triangulation (ADR-058), and now vocabulary-based provenancewe've been <strong>systematically eliminating boolean logic in favor of probabilistic values</strong>.</p>
<p><strong>What we thought we were building:</strong> A graph database with semantic enrichment</p>
<p><strong>What we're actually building:</strong> A vector-augmented knowledge graphproperty graph storage with query-time semantic computation</p>
<blockquote>
<p><strong>Terminology note:</strong> This is NOT a "tensor network" in the quantum physics/ML sense (no tensor contractions, no GPU tensor operations). We perform <strong>vector operations</strong> (dot products, cosine similarity, projections) on embeddings. The term "vector-augmented" is more accurate than "tensor network." See <a href="../RECURSIVE_UPSERT_ARCHITECTURE.md">RECURSIVE_UPSERT_ARCHITECTURE.md</a> for detailed terminology.</p>
</blockquote>
<h3 id="the-shift-from-boolean-to-probabilistic">The Shift from Boolean to Probabilistic</h3>
<p><strong>Before (boolean):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Binary membership</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">relationship</span> <span class="o">=</span> <span class="s2">&quot;APPEARS&quot;</span> <span class="ow">or</span> <span class="s2">&quot;SUPPORTS&quot;</span> <span class="ow">or</span> <span class="s2">&quot;CONTRADICTS&quot;</span>  <span class="c1"># Discrete choice</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># Binary queries</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">has_relationship</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">APPEARS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># True or False</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># Binary grounding</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">grounded</span> <span class="o">=</span> <span class="n">all_edges_support</span>  <span class="c1"># True or False</span>
</code></pre></div></p>
<p><strong>After (probabilistic):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Gradient membership</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">similarity_to_appears</span> <span class="o">=</span> <span class="mf">0.87</span>  <span class="c1"># Continuous [0, 1]</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">in_cluster</span> <span class="o">=</span> <span class="n">similarity</span> <span class="o">&gt;=</span> <span class="n">threshold</span>  <span class="c1"># Threshold-based</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="c1"># Gradient relationships</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="n">relationship_strength</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">edge_embedding</span><span class="p">,</span> <span class="n">polarity_axis</span><span class="p">)</span>  <span class="c1"># [-1, 1]</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">confidence</span> <span class="o">=</span> <span class="mf">0.92</span>  <span class="c1"># [0, 1]</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># Gradient grounding</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">grounding</span> <span class="o">=</span> <span class="n">weighted_avg</span><span class="p">(</span><span class="n">projections</span><span class="p">,</span> <span class="n">confidences</span><span class="p">)</span>  <span class="c1"># [-1, 1]</span>
</code></pre></div></p>
<h3 id="vector-operations-on-graph-structure">Vector Operations on Graph Structure</h3>
<p>The system performs <strong>vector operations</strong> that produce continuous scores instead of boolean results:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>What It Stores</th>
<th>Vector Operation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Concept nodes</strong></td>
<td>Embeddings (768-1536 dim)</td>
<td>Cosine similarity for matching</td>
</tr>
<tr>
<td><strong>Relationship types</strong></td>
<td>Type embeddings in VocabType nodes</td>
<td>Dot product projections onto polarity axis</td>
</tr>
<tr>
<td><strong>Clustering</strong></td>
<td>Similarity scores</td>
<td>Threshold filtering (0.85)</td>
</tr>
<tr>
<td><strong>Grounding</strong></td>
<td>Weighted projections</td>
<td><code>(confidence  projection) / (confidence)</code></td>
</tr>
<tr>
<td><strong>Vocabulary</strong></td>
<td>Category embeddings</td>
<td>Semantic similarity for auto-categorization</td>
</tr>
</tbody>
</table>
<p><strong>Key insight:</strong> These are standard vector operations (rank-1 tensors), not tensor network contractions. The mathematical operations are simple but the architectural pattern is powerful.</p>
<h3 id="why-this-happened">Why This Happened</h3>
<p>Each decision eliminated discrete categories in favor of continuous values:</p>
<ol>
<li><strong>ADR-052 (Vocabulary Expansion-Consolidation):</strong> Instead of hardcoded relationship types, use similarity-based clustering</li>
<li>
<p>Boolean: "Is this SUPPORTS?"  Probabilistic: "87% similar to SUPPORTS"</p>
</li>
<li>
<p><strong>ADR-058 (Polarity Axis):</strong> Instead of binary support/contradict, project onto axis</p>
</li>
<li>
<p>Boolean: "Supporting or contradicting?"  Probabilistic: "+0.73 projection (leaning support)"</p>
</li>
<li>
<p><strong>ADR-065 (Vocabulary-Based APPEARS):</strong> Instead of binary presence, use appearance strength</p>
</li>
<li>Boolean: "Does concept appear?"  Probabilistic: "92% central, 0.15 tangential"</li>
</ol>
<p><strong>Result: A vector-augmented knowledge graph where probabilistic semantics emerge from embedding operations</strong></p>
<h3 id="what-this-means-architecturally">What This Means Architecturally</h3>
<p>We're building a <strong>hybrid system:</strong></p>
<p><strong>Graph layer (symbolic):</strong>
- Structural queries (Cypher patterns)
- Ontology organization (human-readable)
- Provenance chains (source  instance  concept)</p>
<p><strong>Vector layer (continuous):</strong>
- Embeddings (vectors in semantic space)
- Projections (dot products onto axes)
- Clustering (similarity thresholds)
- Grounding (weighted aggregations)</p>
<p><strong>Integration:</strong>
- Relationship types bridge both layers (symbolic labels + vector embeddings)
- Graph topology provides structure; vectors provide semantics
- Queries combine symbolic patterns + probabilistic operations</p>
<h3 id="examples-of-vector-operations-in-the-graph">Examples of Vector Operations in the Graph</h3>
<p><strong>Example 1: Grounding calculation</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Weighted dot product aggregation</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">grounding</span> <span class="o">=</span> <span class="n"></span><span class="p">(</span><span class="n">confidence_i</span> <span class="o">*</span> <span class="n">dot</span><span class="p">(</span><span class="n">edge_embedding_i</span><span class="p">,</span> <span class="n">polarity_axis</span><span class="p">))</span> <span class="o">/</span> <span class="n"></span><span class="p">(</span><span class="n">confidence_i</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>            <span class="err"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>                          <span class="n">Weighted</span> <span class="n">vector</span> <span class="n">projection</span>
</code></pre></div></p>
<p><strong>Example 2: Appearance clustering</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Similarity-based filtering</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">cluster</span> <span class="o">=</span> <span class="p">{</span><span class="n">r</span> <span class="o">|</span> <span class="n">dot</span><span class="p">(</span><span class="n">embed</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">embed</span><span class="p">(</span><span class="s2">&quot;APPEARS&quot;</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="mf">0.75</span><span class="p">}</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>               <span class="err"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>                    <span class="n">Cosine</span> <span class="n">similarity</span> <span class="n">threshold</span>
</code></pre></div></p>
<p><strong>Example 3: Vocabulary consolidation</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Semantic similarity detection</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">should_merge</span> <span class="o">=</span> <span class="n">cosine_sim</span><span class="p">(</span><span class="n">embed</span><span class="p">(</span><span class="n">type1</span><span class="p">),</span> <span class="n">embed</span><span class="p">(</span><span class="n">type2</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">threshold</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>               <span class="err"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>                    <span class="n">Vector</span> <span class="n">similarity</span> <span class="n">comparison</span>
</code></pre></div></p>
<h3 id="implications">Implications</h3>
<p><strong>Benefits of the vector-augmented approach:</strong></p>
<p><strong>Clarity we gain:</strong>
- Honest about mathematical foundation (vector operations, not tensor contractions)
- Probabilistic semantics (not boolean approximations)
- Gradient-based reasoning (smooth transitions, not hard boundaries)</p>
<p><strong>Future possibilities:</strong>
- GPU acceleration for batch vector operations
- pgvector for native PostgreSQL similarity search (ADR-072)
- Dimensionality reduction for efficiency
- Anomaly detection (outliers in embedding space)</p>
<p><strong>Risks we avoid:</strong>
- Pretending discrete when actually continuous
- Binary queries on probabilistic data (threshold confusion)
- Losing semantic richness through forced categorization</p>
<p><strong>Architecture we maintain:</strong>
- Graph remains primary interface (Cypher, ontologies)
- Vectors are implementation detail (users see probabilities)
- Hybrid symbolic-semantic reasoning</p>
<h3 id="decision-embrace-the-pattern">Decision: Embrace the Pattern</h3>
<p><strong>Treat APPEARS as a semantic prototype in embedding space</strong>, identical to how SUPPORTS/CONTRADICTS function as polarity prototypes in ADR-058.</p>
<p><strong>But acknowledge:</strong> This creates a vector-augmented architecture where probabilistic semantics emerge naturally from the design principles.</p>
<h3 id="core-principle">Core Principle</h3>
<p><strong>No hardcoded relationship types.</strong> All relationshipsboth ConceptConcept and ConceptSourceuse the emergent vocabulary system with threshold-based semantic clustering.</p>
<h3 id="pattern-appears-as-vocabulary-cluster">Pattern: APPEARS as Vocabulary Cluster</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># APPEARS becomes a semantic prototype (not hardcoded type)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">appearance_prototype</span> <span class="o">=</span> <span class="s2">&quot;APPEARS&quot;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># LLM generates emergent appearance vocabulary during extraction</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">emergent_types</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="s2">&quot;discussed in&quot;</span><span class="p">,</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>    <span class="s2">&quot;mentioned in&quot;</span><span class="p">,</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>    <span class="s2">&quot;central to&quot;</span><span class="p">,</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>    <span class="s2">&quot;prophesied in&quot;</span><span class="p">,</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>    <span class="s2">&quot;tangentially referenced in&quot;</span><span class="p">,</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>    <span class="s2">&quot;foundational to&quot;</span><span class="p">,</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>    <span class="o">...</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="p">]</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="c1"># Vocabulary table stores ALL relationship types with embeddings</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="n">relationship_vocabulary</span><span class="p">:</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>  <span class="o">-</span> <span class="n">DISCUSSED_IN</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.91</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>  <span class="o">-</span> <span class="n">MENTIONED_IN</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.87</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>  <span class="o">-</span> <span class="n">PROPHESIED_IN</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.82</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>  <span class="o">-</span> <span class="n">CENTRAL_TO</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.88</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>  <span class="o">-</span> <span class="n">SUPPORTS</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.23</span>  <span class="c1"># Far from cluster</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>  <span class="o">-</span> <span class="n">CONTRADICTS</span><span class="p">:</span> <span class="n">embedding</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">similarity_to_appears</span><span class="o">=</span><span class="mf">0.19</span>  <span class="c1"># Far from cluster</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="c1"># Query by semantic similarity to APPEARS prototype (threshold-based)</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="k">def</span><span class="w"> </span><span class="nf">match_concept_sources</span><span class="p">(</span><span class="n">concept_id</span><span class="p">,</span> <span class="n">appears_threshold</span><span class="o">=</span><span class="mf">0.75</span><span class="p">):</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Find sources via relationships semantically similar to APPEARS&quot;&quot;&quot;</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>    <span class="c1"># Get APPEARS cluster from vocabulary (not hardcoded)</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>    <span class="n">appears_embedding</span> <span class="o">=</span> <span class="n">get_vocabulary_embedding</span><span class="p">(</span><span class="s2">&quot;APPEARS&quot;</span><span class="p">)</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>    <span class="c1"># Find all types within threshold</span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>    <span class="n">appearance_types</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>    <span class="k">for</span> <span class="n">vocab_type</span> <span class="ow">in</span> <span class="n">get_all_vocabulary_types</span><span class="p">():</span>
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>        <span class="n">similarity</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">vocab_type</span><span class="o">.</span><span class="n">embedding</span><span class="p">,</span> <span class="n">appears_embedding</span><span class="p">)</span>
<a id="__codelineno-9-35" name="__codelineno-9-35" href="#__codelineno-9-35"></a>        <span class="k">if</span> <span class="n">similarity</span> <span class="o">&gt;=</span> <span class="n">appears_threshold</span><span class="p">:</span>
<a id="__codelineno-9-36" name="__codelineno-9-36" href="#__codelineno-9-36"></a>            <span class="n">appearance_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vocab_type</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-9-37" name="__codelineno-9-37" href="#__codelineno-9-37"></a>
<a id="__codelineno-9-38" name="__codelineno-9-38" href="#__codelineno-9-38"></a>    <span class="c1"># Query using emergent vocabulary</span>
<a id="__codelineno-9-39" name="__codelineno-9-39" href="#__codelineno-9-39"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-9-40" name="__codelineno-9-40" href="#__codelineno-9-40"></a><span class="s2">        MATCH (c:Concept </span><span class="se">{{</span><span class="s2">concept_id: $concept_id</span><span class="se">}}</span><span class="s2">)-[r]-&gt;(s:Source)</span>
<a id="__codelineno-9-41" name="__codelineno-9-41" href="#__codelineno-9-41"></a><span class="s2">        WHERE type(r) IN </span><span class="si">{</span><span class="n">appearance_types</span><span class="si">}</span>
<a id="__codelineno-9-42" name="__codelineno-9-42" href="#__codelineno-9-42"></a><span class="s2">        RETURN s, type(r), r.confidence</span>
<a id="__codelineno-9-43" name="__codelineno-9-43" href="#__codelineno-9-43"></a><span class="s2">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="polarity-axis-for-appearance-strength">Polarity Axis for Appearance Strength</h3>
<p>Apply ADR-058's polarity axis triangulation to appearance relationships:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Define polarity pairs (emergent from vocabulary, not hardcoded)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">appearance_polarity_pairs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="p">(</span><span class="s2">&quot;CENTRAL_TO&quot;</span><span class="p">,</span> <span class="s2">&quot;TANGENTIAL_TO&quot;</span><span class="p">),</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="p">(</span><span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span><span class="p">,</span> <span class="s2">&quot;BRIEFLY_MENTIONED_IN&quot;</span><span class="p">),</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="p">(</span><span class="s2">&quot;FOUNDATIONAL_TO&quot;</span><span class="p">,</span> <span class="s2">&quot;PERIPHERAL_TO&quot;</span><span class="p">),</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="p">]</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="c1"># Calculate polarity axis (same algorithm as grounding)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">difference_vectors</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="k">for</span> <span class="p">(</span><span class="n">positive</span><span class="p">,</span> <span class="n">negative</span><span class="p">)</span> <span class="ow">in</span> <span class="n">appearance_polarity_pairs</span><span class="p">:</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>    <span class="n">delta</span> <span class="o">=</span> <span class="n">embedding</span><span class="p">(</span><span class="n">positive</span><span class="p">)</span> <span class="o">-</span> <span class="n">embedding</span><span class="p">(</span><span class="n">negative</span><span class="p">)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>    <span class="n">difference_vectors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="n">appearance_axis</span> <span class="o">=</span> <span class="n">normalize</span><span class="p">(</span><span class="n">average</span><span class="p">(</span><span class="n">difference_vectors</span><span class="p">))</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="c1"># Project edge onto axis for strength score</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">calculate_appearance_strength</span><span class="p">(</span><span class="n">edge_type</span><span class="p">):</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="sd">    Returns: -1.0 (tangential) to +1.0 (central)</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="sd">    Same dot product projection as grounding calculation.</span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>    <span class="n">edge_emb</span> <span class="o">=</span> <span class="n">get_vocabulary_embedding</span><span class="p">(</span><span class="n">edge_type</span><span class="p">)</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a>    <span class="k">return</span> <span class="n">dot_product</span><span class="p">(</span><span class="n">edge_emb</span><span class="p">,</span> <span class="n">appearance_axis</span><span class="p">)</span>
</code></pre></div>
<h3 id="storage-emergent-types-not-hardcoded">Storage: Emergent Types, Not Hardcoded</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">// LLM extraction generates whatever types emerge from corpus</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;covenant_name&quot;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">PROPHESIED_IN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="n">Source</span><span class="w"> </span><span class="p">{...})</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;abraham&quot;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">CENTRAL_TO</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="n">Source</span><span class="w"> </span><span class="p">{...})</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">:</span><span class="n">Concept</span><span class="w"> </span><span class="p">{</span><span class="n">concept_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;livestock&quot;</span><span class="p">})</span><span class="o">-[</span><span class="p">:</span><span class="n">MENTIONED_IN</span><span class="o">]-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">:</span><span class="n">Source</span><span class="w"> </span><span class="p">{...})</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="c1">// Vocabulary table auto-populated by extraction</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="c1">// No hardcoded type list - vocabulary emerges from usage</span>
</code></pre></div>
<hr />
<h2 id="implementation">Implementation</h2>
<h3 id="phase-1-infrastructure-transparent-migration">Phase 1: Infrastructure (Transparent Migration)</h3>
<p><strong>Automatic appearance type inference</strong> during ingestion:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># api/lib/serialization.py</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">def</span><span class="w"> </span><span class="nf">infer_appearance_type</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">all_instances</span><span class="p">):</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="sd">    Infer how concept appears based on structural signals.</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="sd">    Transparent to LLM - no prompt changes needed.</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="n">signals</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        <span class="s1">&#39;centrality&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">instance</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">]),</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        <span class="s1">&#39;frequency&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_instances</span><span class="p">),</span>  <span class="c1"># How many times in this source</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>        <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="n">instance</span><span class="p">[</span><span class="s1">&#39;paragraph&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;total_paragraphs&#39;</span><span class="p">],</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="p">}</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="c1"># Simple heuristics  vocabulary type</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>    <span class="k">if</span> <span class="n">signals</span><span class="p">[</span><span class="s1">&#39;centrality&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">:</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>        <span class="k">return</span> <span class="s2">&quot;CENTRAL_TO&quot;</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    <span class="k">elif</span> <span class="n">signals</span><span class="p">[</span><span class="s1">&#39;frequency&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>        <span class="k">return</span> <span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>    <span class="k">elif</span> <span class="n">signals</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>        <span class="k">return</span> <span class="s2">&quot;INTRODUCED_IN&quot;</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>        <span class="k">return</span> <span class="s2">&quot;APPEARS&quot;</span>  <span class="c1"># Default fallback</span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="k">def</span><span class="w"> </span><span class="nf">create_appearance_relationship</span><span class="p">(</span><span class="n">concept</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">all_instances</span><span class="p">):</span>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create appearance relationship with inferred type&quot;&quot;&quot;</span>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>    <span class="c1"># Infer type from structural signals</span>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>    <span class="n">type_hint</span> <span class="o">=</span> <span class="n">infer_appearance_type</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">all_instances</span><span class="p">)</span>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>    <span class="c1"># Normalize against vocabulary cluster</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>    <span class="n">canonical</span> <span class="o">=</span> <span class="n">normalize_appearance_type</span><span class="p">(</span><span class="n">type_hint</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.80</span><span class="p">)</span>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>    <span class="n">confidence</span> <span class="o">=</span> <span class="n">calculate_confidence</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>    <span class="c1"># Create relationship (same structure, enriched type)</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a><span class="s2">        MATCH (c:Concept </span><span class="se">{{</span><span class="s2">concept_id: $concept_id</span><span class="se">}}</span><span class="s2">)</span>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a><span class="s2">        MATCH (s:Source </span><span class="se">{{</span><span class="s2">source_id: $source_id</span><span class="se">}}</span><span class="s2">)</span>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a><span class="s2">        MERGE (c)-[r:</span><span class="si">{</span><span class="n">canonical</span><span class="si">}</span><span class="s2">]-&gt;(s)</span>
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a><span class="s2">        SET r.confidence = $confidence,</span>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a><span class="s2">            r.appearance_strength = $strength</span>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a><span class="s2">    &quot;&quot;&quot;</span>
</code></pre></div>
<h3 id="phase-2-graphqueryfacade-enhancement">Phase 2: GraphQueryFacade Enhancement</h3>
<p><strong>Vocabulary-aware source matching</strong> (ADR-048 pattern):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># api/api/lib/query_facade.py</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">GraphQueryFacade</span><span class="p">:</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match_concept_sources</span><span class="p">(</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>        <span class="n">appearance_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">,</span>  <span class="c1"># Similarity to APPEARS prototype</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>        <span class="n">strength_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>      <span class="c1"># Projection on centrality axis</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="p">):</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="sd">        Match sources using semantic similarity to APPEARS cluster.</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="sd">        Args:</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="sd">            appearance_threshold: Min similarity to APPEARS prototype (0.75 = ~1 sigma)</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="sd">            strength_threshold: Min projection on appearance_axis (optional)</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a>
<a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="sd">        Returns:</span>
<a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a><span class="sd">            Sources with appearance metadata</span>
<a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a>        <span class="c1"># Get appearance cluster from vocabulary (not hardcoded)</span>
<a id="__codelineno-13-21" name="__codelineno-13-21" href="#__codelineno-13-21"></a>        <span class="n">appearance_types</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get_vocabulary_cluster</span><span class="p">(</span>
<a id="__codelineno-13-22" name="__codelineno-13-22" href="#__codelineno-13-22"></a>            <span class="n">prototype</span><span class="o">=</span><span class="s2">&quot;APPEARS&quot;</span><span class="p">,</span>
<a id="__codelineno-13-23" name="__codelineno-13-23" href="#__codelineno-13-23"></a>            <span class="n">threshold</span><span class="o">=</span><span class="n">appearance_threshold</span><span class="p">,</span>
<a id="__codelineno-13-24" name="__codelineno-13-24" href="#__codelineno-13-24"></a>            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;provenance&quot;</span>  <span class="c1"># Optional filter</span>
<a id="__codelineno-13-25" name="__codelineno-13-25" href="#__codelineno-13-25"></a>        <span class="p">)</span>
<a id="__codelineno-13-26" name="__codelineno-13-26" href="#__codelineno-13-26"></a>
<a id="__codelineno-13-27" name="__codelineno-13-27" href="#__codelineno-13-27"></a>        <span class="c1"># Build query with emergent types</span>
<a id="__codelineno-13-28" name="__codelineno-13-28" href="#__codelineno-13-28"></a>        <span class="n">filters</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;type(r) IN </span><span class="si">{</span><span class="n">appearance_types</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-13-29" name="__codelineno-13-29" href="#__codelineno-13-29"></a>
<a id="__codelineno-13-30" name="__codelineno-13-30" href="#__codelineno-13-30"></a>        <span class="k">if</span> <span class="n">strength_threshold</span><span class="p">:</span>
<a id="__codelineno-13-31" name="__codelineno-13-31" href="#__codelineno-13-31"></a>            <span class="c1"># Filter by projection on appearance_axis (ADR-058 style)</span>
<a id="__codelineno-13-32" name="__codelineno-13-32" href="#__codelineno-13-32"></a>            <span class="n">filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;r.appearance_strength &gt;= </span><span class="si">{</span><span class="n">strength_threshold</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-13-33" name="__codelineno-13-33" href="#__codelineno-13-33"></a>
<a id="__codelineno-13-34" name="__codelineno-13-34" href="#__codelineno-13-34"></a>        <span class="n">where</span> <span class="o">=</span> <span class="s2">&quot; AND &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>
<a id="__codelineno-13-35" name="__codelineno-13-35" href="#__codelineno-13-35"></a>
<a id="__codelineno-13-36" name="__codelineno-13-36" href="#__codelineno-13-36"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">_execute_cypher</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-13-37" name="__codelineno-13-37" href="#__codelineno-13-37"></a><span class="s2">            MATCH (c:Concept </span><span class="se">{{</span><span class="s2">concept_id: $concept_id</span><span class="se">}}</span><span class="s2">)-[r]-&gt;(s:Source)</span>
<a id="__codelineno-13-38" name="__codelineno-13-38" href="#__codelineno-13-38"></a><span class="s2">            WHERE </span><span class="si">{</span><span class="n">where</span><span class="si">}</span>
<a id="__codelineno-13-39" name="__codelineno-13-39" href="#__codelineno-13-39"></a><span class="s2">            RETURN s, type(r), r.appearance_strength</span>
<a id="__codelineno-13-40" name="__codelineno-13-40" href="#__codelineno-13-40"></a><span class="s2">            ORDER BY r.appearance_strength DESC</span>
<a id="__codelineno-13-41" name="__codelineno-13-41" href="#__codelineno-13-41"></a><span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;concept_id&quot;</span><span class="p">:</span> <span class="n">concept_id</span><span class="p">})</span>
</code></pre></div>
<h3 id="phase-3-vocabulary-cluster-management">Phase 3: Vocabulary Cluster Management</h3>
<p><strong>AGEClient methods</strong> for cluster operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># api/api/lib/age_client.py</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">AGEClient</span><span class="p">:</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get_vocabulary_cluster</span><span class="p">(</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>        <span class="n">prototype</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>        <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.75</span><span class="p">,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>        <span class="n">category</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="sd">        Get vocabulary types semantically similar to prototype.</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="sd">        Uses embeddings, not hardcoded lists.</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="sd">        Examples:</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="sd">            get_vocabulary_cluster(&quot;APPEARS&quot;, 0.75)</span>
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="sd">             [&quot;APPEARS&quot;, &quot;DISCUSSED_IN&quot;, &quot;MENTIONED_IN&quot;, &quot;CENTRAL_TO&quot;, ...]</span>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="sd">            get_vocabulary_cluster(&quot;SUPPORTS&quot;, 0.80)</span>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="sd">             [&quot;SUPPORTS&quot;, &quot;VALIDATES&quot;, &quot;CONFIRMS&quot;, &quot;REINFORCES&quot;, ...]</span>
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>        <span class="n">prototype_emb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_vocabulary_embedding</span><span class="p">(</span><span class="n">prototype</span><span class="p">)</span>
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>        <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="s2">            SELECT relationship_type, embedding</span>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="s2">            FROM kg_api.relationship_vocabulary</span>
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a><span class="s2">            WHERE embedding IS NOT NULL</span>
<a id="__codelineno-14-28" name="__codelineno-14-28" href="#__codelineno-14-28"></a><span class="s2">              AND is_active = TRUE</span>
<a id="__codelineno-14-29" name="__codelineno-14-29" href="#__codelineno-14-29"></a><span class="s2">        &quot;&quot;&quot;</span>
<a id="__codelineno-14-30" name="__codelineno-14-30" href="#__codelineno-14-30"></a>        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
<a id="__codelineno-14-31" name="__codelineno-14-31" href="#__codelineno-14-31"></a>            <span class="n">query</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot; AND category = &#39;</span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<a id="__codelineno-14-32" name="__codelineno-14-32" href="#__codelineno-14-32"></a>
<a id="__codelineno-14-33" name="__codelineno-14-33" href="#__codelineno-14-33"></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_sql</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
<a id="__codelineno-14-34" name="__codelineno-14-34" href="#__codelineno-14-34"></a>
<a id="__codelineno-14-35" name="__codelineno-14-35" href="#__codelineno-14-35"></a>        <span class="c1"># Calculate similarities</span>
<a id="__codelineno-14-36" name="__codelineno-14-36" href="#__codelineno-14-36"></a>        <span class="n">cluster</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-14-37" name="__codelineno-14-37" href="#__codelineno-14-37"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
<a id="__codelineno-14-38" name="__codelineno-14-38" href="#__codelineno-14-38"></a>            <span class="n">type_emb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;embedding&#39;</span><span class="p">]))</span>
<a id="__codelineno-14-39" name="__codelineno-14-39" href="#__codelineno-14-39"></a>            <span class="n">similarity</span> <span class="o">=</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">prototype_emb</span><span class="p">,</span> <span class="n">type_emb</span><span class="p">)</span>
<a id="__codelineno-14-40" name="__codelineno-14-40" href="#__codelineno-14-40"></a>
<a id="__codelineno-14-41" name="__codelineno-14-41" href="#__codelineno-14-41"></a>            <span class="k">if</span> <span class="n">similarity</span> <span class="o">&gt;=</span> <span class="n">threshold</span><span class="p">:</span>
<a id="__codelineno-14-42" name="__codelineno-14-42" href="#__codelineno-14-42"></a>                <span class="n">cluster</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;relationship_type&#39;</span><span class="p">])</span>
<a id="__codelineno-14-43" name="__codelineno-14-43" href="#__codelineno-14-43"></a>
<a id="__codelineno-14-44" name="__codelineno-14-44" href="#__codelineno-14-44"></a>        <span class="k">return</span> <span class="n">cluster</span>
<a id="__codelineno-14-45" name="__codelineno-14-45" href="#__codelineno-14-45"></a>
<a id="__codelineno-14-46" name="__codelineno-14-46" href="#__codelineno-14-46"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_appearance_strength</span><span class="p">(</span>
<a id="__codelineno-14-47" name="__codelineno-14-47" href="#__codelineno-14-47"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-14-48" name="__codelineno-14-48" href="#__codelineno-14-48"></a>        <span class="n">edge_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-14-49" name="__codelineno-14-49" href="#__codelineno-14-49"></a>        <span class="n">polarity_pairs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-14-50" name="__codelineno-14-50" href="#__codelineno-14-50"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a id="__codelineno-14-51" name="__codelineno-14-51" href="#__codelineno-14-51"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-14-52" name="__codelineno-14-52" href="#__codelineno-14-52"></a><span class="sd">        Calculate edge position on appearance strength axis (ADR-058).</span>
<a id="__codelineno-14-53" name="__codelineno-14-53" href="#__codelineno-14-53"></a>
<a id="__codelineno-14-54" name="__codelineno-14-54" href="#__codelineno-14-54"></a><span class="sd">        Returns: -1.0 (tangential) to +1.0 (central)</span>
<a id="__codelineno-14-55" name="__codelineno-14-55" href="#__codelineno-14-55"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-14-56" name="__codelineno-14-56" href="#__codelineno-14-56"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">polarity_pairs</span><span class="p">:</span>
<a id="__codelineno-14-57" name="__codelineno-14-57" href="#__codelineno-14-57"></a>            <span class="c1"># Default appearance polarity (emergent from vocabulary)</span>
<a id="__codelineno-14-58" name="__codelineno-14-58" href="#__codelineno-14-58"></a>            <span class="n">polarity_pairs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-14-59" name="__codelineno-14-59" href="#__codelineno-14-59"></a>                <span class="p">(</span><span class="s2">&quot;CENTRAL_TO&quot;</span><span class="p">,</span> <span class="s2">&quot;TANGENTIAL_TO&quot;</span><span class="p">),</span>
<a id="__codelineno-14-60" name="__codelineno-14-60" href="#__codelineno-14-60"></a>                <span class="p">(</span><span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span><span class="p">,</span> <span class="s2">&quot;BRIEFLY_MENTIONED_IN&quot;</span><span class="p">),</span>
<a id="__codelineno-14-61" name="__codelineno-14-61" href="#__codelineno-14-61"></a>            <span class="p">]</span>
<a id="__codelineno-14-62" name="__codelineno-14-62" href="#__codelineno-14-62"></a>
<a id="__codelineno-14-63" name="__codelineno-14-63" href="#__codelineno-14-63"></a>        <span class="c1"># Same algorithm as grounding calculation (ADR-058)</span>
<a id="__codelineno-14-64" name="__codelineno-14-64" href="#__codelineno-14-64"></a>        <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_compute_polarity_axis</span><span class="p">(</span><span class="n">polarity_pairs</span><span class="p">)</span>
<a id="__codelineno-14-65" name="__codelineno-14-65" href="#__codelineno-14-65"></a>        <span class="n">edge_emb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_vocabulary_embedding</span><span class="p">(</span><span class="n">edge_type</span><span class="p">)</span>
<a id="__codelineno-14-66" name="__codelineno-14-66" href="#__codelineno-14-66"></a>
<a id="__codelineno-14-67" name="__codelineno-14-67" href="#__codelineno-14-67"></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">edge_emb</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="consequences">Consequences</h2>
<h3 id="benefits">Benefits</h3>
<p><strong>1. Architectural consistency</strong>
- ConceptConcept and ConceptSource use identical patterns
- All relationships flow through vocabulary system
- Eliminates special-case hardcoded types</p>
<p><strong>2. Semantic richness</strong>
- Capture nuance in how concepts appear in sources
- Domain-specific appearance types emerge naturally
- Biblical: prophesied_in, fulfilled_in, typified_in
- Technical docs: introduced_in, deprecated_in, explained_in</p>
<p><strong>3. Query flexibility</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Strict: Only very similar to APPEARS</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">sources</span> <span class="o">=</span> <span class="n">facade</span><span class="o">.</span><span class="n">match_concept_sources</span><span class="p">(</span><span class="n">concept_id</span><span class="p">,</span> <span class="n">appearance_threshold</span><span class="o">=</span><span class="mf">0.90</span><span class="p">)</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># Relaxed: Broader appearance-like relationships</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="n">sources</span> <span class="o">=</span> <span class="n">facade</span><span class="o">.</span><span class="n">match_concept_sources</span><span class="p">(</span><span class="n">concept_id</span><span class="p">,</span> <span class="n">appearance_threshold</span><span class="o">=</span><span class="mf">0.70</span><span class="p">)</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="c1"># Filtered: Only central appearances</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="n">sources</span> <span class="o">=</span> <span class="n">facade</span><span class="o">.</span><span class="n">match_concept_sources</span><span class="p">(</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="n">concept_id</span><span class="p">,</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    <span class="n">appearance_threshold</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    <span class="n">strength_threshold</span><span class="o">=</span><span class="mf">0.5</span>  <span class="c1"># Positive projection on centrality axis</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="p">)</span>
</code></pre></div></p>
<p><strong>4. Vocabulary consolidation applies</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Same consolidation workflow</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>kg<span class="w"> </span>vocab<span class="w"> </span>consolidate<span class="w"> </span>--auto
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Might merge:</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1"># - &quot;discussed in&quot; + &quot;discussed thoroughly in&quot;  &quot;DISCUSSED_IN&quot;</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="c1"># - &quot;mentioned&quot; + &quot;mentioned in&quot;  &quot;MENTIONED_IN&quot;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="c1"># - &quot;appears in&quot; + &quot;appears within&quot;  &quot;APPEARS&quot;</span>
</code></pre></div></p>
<p><strong>5. Transparent to interfaces</strong>
- Raw Cypher queries unchanged (pattern <code>[r]</code> matches any type)
- API responses backward compatible
- MCP/CLI/Web progressively enhance with appearance metadata
- No breaking changes</p>
<h3 id="costs">Costs</h3>
<p><strong>1. Initial migration effort</strong>
- Modify ingestion pipeline (serialization.py)
- Add appearance inference logic
- Extend GraphQueryFacade
- Update vocabulary table schema (add category="provenance")</p>
<p><strong>2. Complexity for simple cases</strong>
- Binary "does concept appear?" becomes gradient with threshold
- Requires understanding of similarity scores
- More configuration options (thresholds, strength filters)</p>
<p><strong>3. Storage overhead</strong>
- Each appearance type needs embedding in vocabulary table
- Polarity pairs for appearance axis calculation
- Additional relationship properties (confidence, strength)</p>
<h3 id="mitigations">Mitigations</h3>
<p><strong>Default fallback behavior:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># If inference fails or vocabulary unavailable, use generic APPEARS</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">canonical</span> <span class="o">=</span> <span class="n">normalize_appearance_type</span><span class="p">(</span><span class="n">type_hint</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.80</span><span class="p">)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">canonical</span><span class="p">:</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="n">canonical</span> <span class="o">=</span> <span class="s2">&quot;APPEARS&quot;</span>  <span class="c1"># Safe fallback</span>
</code></pre></div></p>
<p><strong>Progressive enhancement:</strong>
- Old data: Generic APPEARS relationships (still works)
- New data: Rich appearance types (better quality)
- Queries: Work with both (type pattern matches any)</p>
<p><strong>Facade abstraction:</strong>
- Complexity hidden in GraphQueryFacade
- API endpoints use simple interface
- Raw Cypher users can ignore vocabulary if desired</p>
<hr />
<h2 id="open-question-llm-interface-design">Open Question: LLM Interface Design</h2>
<h3 id="problem-statement">Problem Statement</h3>
<p>The vocabulary cluster is backend infrastructure for semantic richness and query flexibility. But how do we determine appearance types without burdening the LLM with vocabulary cluster complexity?</p>
<p><strong>Core tension:</strong>
- <strong>Backend needs:</strong> Rich appearance types (CENTRAL_TO, MENTIONED_IN, PROPHESIED_IN, etc.)
- <strong>LLM should see:</strong> Simple, straightforward extraction task</p>
<p><strong>Critical constraint:</strong> Avoid domain-specific overfitting. Solution must work across:
- Technical documentation (introduced, deprecated, explained, referenced)
- Research papers (foundational, cited, critiqued, extended)
- Narrative text (central, peripheral, foreshadowed, recalled)
- Code documentation (defined, used, imported, exported)
- Legal documents (enacted, amended, superseded, referenced)</p>
<h3 id="interface-options">Interface Options</h3>
<h4 id="option-1-zero-llm-involvement-pure-structural-inference">Option 1: Zero LLM Involvement (Pure Structural Inference)</h4>
<p><strong>LLM sees:</strong> Current extraction prompt (no changes)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>Extract concepts from this text. For each concept:
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>- Label
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>- Description
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>- Relationships to other concepts
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>- Quote (evidence)
</code></pre></div>
<p><strong>LLM does:</strong> Extracts concepts with quotes (exactly as today)</p>
<p><strong>Backend does:</strong> Infers appearance type from structural signals</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">infer_appearance_type</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">all_instances</span><span class="p">):</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Pure structural inference - no LLM involvement&quot;&quot;&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="c1"># Structural signals</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="n">centrality</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">instance</span><span class="p">[</span><span class="s1">&#39;quote&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">source</span><span class="p">[</span><span class="s1">&#39;full_text&#39;</span><span class="p">])</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="n">frequency</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_instances</span><span class="p">)</span>  <span class="c1"># How many times in source</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    <span class="n">position</span> <span class="o">=</span> <span class="n">instance</span><span class="p">[</span><span class="s1">&#39;paragraph&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">source</span><span class="p">[</span><span class="s1">&#39;total_paragraphs&#39;</span><span class="p">]</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>    <span class="c1"># Domain-agnostic heuristics</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    <span class="k">if</span> <span class="n">centrality</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">:</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>        <span class="k">return</span> <span class="s2">&quot;CENTRAL_TO&quot;</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>    <span class="k">elif</span> <span class="n">frequency</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>        <span class="k">return</span> <span class="s2">&quot;FREQUENTLY_MENTIONED_IN&quot;</span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>    <span class="k">elif</span> <span class="n">position</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>        <span class="k">return</span> <span class="s2">&quot;INTRODUCED_IN&quot;</span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>        <span class="k">return</span> <span class="s2">&quot;APPEARS&quot;</span>
</code></pre></div>
<p><strong>Pros:</strong>
- Zero LLM cognitive load (truly transparent)
- No prompt engineering required
- No extraction cost increase
- Works across all domains identically</p>
<p><strong>Cons:</strong>
- Misses semantic nuances structure can't capture
- Example failures:
  - Short prophetic statement  "MENTIONED_IN" (should be "PROPHESIED_IN")
  - Lengthy critique  "CENTRAL_TO" (should be "CRITIQUED_IN")
  - Referenced theorem  "MENTIONED_IN" (should be "APPLIED")</p>
<p><strong>Domain-agnostic effectiveness:</strong> Medium - structure approximates semantics but misses intent</p>
<hr />
<h4 id="option-2-simple-categorical-hint-recommended-balance">Option 2: Simple Categorical Hint (Recommended Balance)</h4>
<p><strong>LLM sees:</strong> One additional simple question (no vocabulary exposure)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>Extract concepts from this text. For each concept:
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>- Label
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>- Description
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>- Quote (evidence)
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>- [OPTIONAL] Prominence: how prominent is this concept?
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>  - &quot;central&quot; (primary theme/subject)
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>  - &quot;discussed&quot; (explained in detail)
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>  - &quot;mentioned&quot; (brief reference)
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>  - &quot;peripheral&quot; (tangential or implied)
</code></pre></div>
<p><strong>LLM does:</strong> Picks from 4 simple, semantic categories</p>
<p><strong>Backend does:</strong> Maps category to vocabulary cluster</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># LLM output (simple):</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    <span class="s2">&quot;concept&quot;</span><span class="p">:</span> <span class="s2">&quot;microservices architecture&quot;</span><span class="p">,</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="s2">&quot;prominence&quot;</span><span class="p">:</span> <span class="s2">&quot;discussed&quot;</span><span class="p">,</span>  <span class="c1"># Simple semantic judgment</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>    <span class="s2">&quot;quote&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">,</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="p">}</span>
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="c1"># Backend mapping (complex, invisible):</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="n">PROMINENCE_MAPPING</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>    <span class="s2">&quot;central&quot;</span><span class="p">:</span> <span class="s2">&quot;CENTRAL_TO&quot;</span><span class="p">,</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>    <span class="s2">&quot;discussed&quot;</span><span class="p">:</span> <span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span><span class="p">,</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>    <span class="s2">&quot;mentioned&quot;</span><span class="p">:</span> <span class="s2">&quot;MENTIONED_IN&quot;</span><span class="p">,</span>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>    <span class="s2">&quot;peripheral&quot;</span><span class="p">:</span> <span class="s2">&quot;TANGENTIALLY_REFERENCED_IN&quot;</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="p">}</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="n">hint</span> <span class="o">=</span> <span class="n">PROMINENCE_MAPPING</span><span class="p">[</span><span class="n">prominence</span><span class="p">]</span>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="c1"># Normalize to cluster (vocabulary infrastructure)</span>
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="n">canonical</span> <span class="o">=</span> <span class="n">normalize_to_cluster</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="s2">&quot;APPEARS&quot;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.80</span><span class="p">)</span>
</code></pre></div>
<p><strong>Pros:</strong>
- LLM provides semantic understanding (better than structure alone)
- Categories are domain-agnostic and intuitive
- LLM never sees vocabulary cluster complexity
- Minimal prompt addition (4 simple choices)
- Optional field (fallback to structural inference)</p>
<p><strong>Cons:</strong>
- Slight increase in extraction prompt complexity
- Requires LLM to make prominence judgment
- Categories may not capture all nuances (prophesy, critique, definition)</p>
<p><strong>Domain-agnostic effectiveness:</strong> High - prominence is universally meaningful</p>
<p><strong>Example across domains:</strong></p>
<table>
<thead>
<tr>
<th>Domain</th>
<th>Concept</th>
<th>Prominence</th>
<th>Backend Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td>Technical</td>
<td>"API versioning"</td>
<td>discussed</td>
<td>THOROUGHLY_DISCUSSED_IN</td>
</tr>
<tr>
<td>Research</td>
<td>"relativity"</td>
<td>central</td>
<td>CENTRAL_TO</td>
</tr>
<tr>
<td>Narrative</td>
<td>"betrayal theme"</td>
<td>peripheral</td>
<td>TANGENTIALLY_REFERENCED_IN</td>
</tr>
<tr>
<td>Code</td>
<td>"Logger class"</td>
<td>mentioned</td>
<td>MENTIONED_IN</td>
</tr>
<tr>
<td>Legal</td>
<td>"due process"</td>
<td>central</td>
<td>CENTRAL_TO</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="option-3-domain-specific-semantic-characterization">Option 3: Domain-Specific Semantic Characterization</h4>
<p><strong>LLM sees:</strong> Domain-specific characterization prompt</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a># For technical documentation:
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>Indicate relationship to this concept:
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>- &quot;introduces&quot; (defines or explains for first time)
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>- &quot;uses&quot; (applies or implements)
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>- &quot;deprecates&quot; (marks as obsolete)
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>- &quot;references&quot; (cites or mentions)
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a># For research papers:
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>Indicate relationship to this concept:
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>- &quot;proposes&quot; (introduces new idea)
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>- &quot;validates&quot; (provides evidence for)
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>- &quot;critiques&quot; (challenges or questions)
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>- &quot;extends&quot; (builds upon)
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a># For narrative text:
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>Indicate relationship to this concept:
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>- &quot;develops&quot; (central theme)
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>- &quot;foreshadows&quot; (hints at future)
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>- &quot;recalls&quot; (references earlier)
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>- &quot;mentions&quot; (brief appearance)
</code></pre></div>
<p><strong>LLM does:</strong> Picks from domain-specific semantic categories</p>
<p><strong>Backend does:</strong> Maps domain category to vocabulary</p>
<p><strong>Pros:</strong>
- Rich semantic characterization
- Domain-appropriate nuance
- LLM leverages domain understanding</p>
<p><strong>Cons:</strong>
- <strong>Requires domain detection</strong> (how do we know which prompt to use?)
- Prompt engineering per domain
- Different vocabularies per domain (harder to consolidate)
- <strong>Overfitting risk</strong> - categories may not transfer</p>
<p><strong>Domain-agnostic effectiveness:</strong> Low - explicitly domain-specific</p>
<p><strong>Rejected because:</strong> Violates domain-agnostic constraint, adds complexity</p>
<hr />
<h4 id="option-4-natural-language-description-parsing">Option 4: Natural Language Description + Parsing</h4>
<p><strong>LLM sees:</strong> Open-ended question</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>Extract concepts. For each, briefly describe how it appears in this text.
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>Examples:
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>- &quot;discussed extensively as central argument&quot;
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>- &quot;referenced briefly in passing&quot;
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>- &quot;introduced early then developed throughout&quot;
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>- &quot;implied but not explicitly stated&quot;
</code></pre></div>
<p><strong>LLM does:</strong> Writes 1-2 sentence natural language description</p>
<p><strong>Backend does:</strong> NLP extraction + vocabulary normalization</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># LLM output (natural):</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="p">{</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="s2">&quot;concept&quot;</span><span class="p">:</span> <span class="s2">&quot;observer pattern&quot;</span><span class="p">,</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>    <span class="s2">&quot;appearance_description&quot;</span><span class="p">:</span> <span class="s2">&quot;introduced early in the document and used throughout as the primary design example&quot;</span><span class="p">,</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="s2">&quot;quote&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="p">}</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="c1"># Backend NLP (complex):</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="n">keywords</span> <span class="o">=</span> <span class="n">extract_keywords</span><span class="p">(</span><span class="n">appearance_description</span><span class="p">)</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="c1">#  [&quot;introduced&quot;, &quot;primary&quot;, &quot;design&quot;, &quot;example&quot;, &quot;throughout&quot;]</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="k">if</span> <span class="s2">&quot;primary&quot;</span> <span class="ow">in</span> <span class="n">keywords</span> <span class="ow">or</span> <span class="s2">&quot;central&quot;</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a>    <span class="n">hint</span> <span class="o">=</span> <span class="s2">&quot;CENTRAL_TO&quot;</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="k">elif</span> <span class="s2">&quot;introduced&quot;</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a>    <span class="n">hint</span> <span class="o">=</span> <span class="s2">&quot;INTRODUCED_IN&quot;</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="k">elif</span> <span class="s2">&quot;throughout&quot;</span> <span class="ow">in</span> <span class="n">keywords</span><span class="p">:</span>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>    <span class="n">hint</span> <span class="o">=</span> <span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="n">canonical</span> <span class="o">=</span> <span class="n">normalize_to_cluster</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="s2">&quot;APPEARS&quot;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.80</span><span class="p">)</span>
</code></pre></div>
<p><strong>Pros:</strong>
- Most natural for LLM (no categorization)
- Rich semantic information
- Domain-agnostic (LLM writes in own words)
- Captures nuances categories might miss</p>
<p><strong>Cons:</strong>
- Requires NLP parsing (brittle, language-dependent)
- Inconsistent phrasing makes extraction harder
- Higher token cost (longer outputs)
- Validation difficult (free text)</p>
<p><strong>Domain-agnostic effectiveness:</strong> High potential, high complexity</p>
<hr />
<h3 id="evaluation-criteria">Evaluation Criteria</h3>
<table>
<thead>
<tr>
<th>Criterion</th>
<th>Option 1:<br/>Structural</th>
<th>Option 2:<br/>Categorical</th>
<th>Option 3:<br/>Domain-Specific</th>
<th>Option 4:<br/>Natural Language</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>LLM cognitive load</strong></td>
<td>None</td>
<td>Minimal</td>
<td>Medium</td>
<td>Low</td>
</tr>
<tr>
<td><strong>Prompt complexity</strong></td>
<td>Zero change</td>
<td>+4 categories</td>
<td>+domain detection</td>
<td>+open question</td>
</tr>
<tr>
<td><strong>Domain agnostic</strong></td>
<td> Yes</td>
<td> Yes</td>
<td> No</td>
<td> Yes</td>
</tr>
<tr>
<td><strong>Semantic accuracy</strong></td>
<td>Medium</td>
<td>High</td>
<td>Very High*</td>
<td>Very High</td>
</tr>
<tr>
<td><strong>Implementation complexity</strong></td>
<td>Low</td>
<td>Low</td>
<td>High</td>
<td>Medium</td>
</tr>
<tr>
<td><strong>Token cost</strong></td>
<td>No change</td>
<td>+~5 tokens</td>
<td>+~5 tokens</td>
<td>+~20 tokens</td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td>Easy (deterministic)</td>
<td>Easy (enum)</td>
<td>Medium (enum per domain)</td>
<td>Hard (free text)</td>
</tr>
<tr>
<td><strong>Extensibility</strong></td>
<td>Limited</td>
<td>Good</td>
<td>Domain-specific</td>
<td>Excellent</td>
</tr>
</tbody>
</table>
<p>*Per domain only</p>
<h3 id="recommendation-hybrid-approach-option-1-optional-option-2">Recommendation: Hybrid Approach (Option 1 + Optional Option 2)</h3>
<p><strong>Default:</strong> Structural inference (Option 1) - works transparently
<strong>Enhancement:</strong> Optional prominence hint (Option 2) - when extraction model supports it</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">determine_appearance_type</span><span class="p">(</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>    <span class="n">prominence_hint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>  <span class="c1"># From LLM if provided</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>    <span class="n">instance</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>    <span class="n">source</span><span class="p">:</span> <span class="n">Dict</span><span class="p">,</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>    <span class="n">all_instances</span><span class="p">:</span> <span class="n">List</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="sd">    Determine appearance type using LLM hint OR structural fallback.</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="sd">    LLM never sees vocabulary cluster - that&#39;s all backend.</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>    <span class="c1"># Priority 1: Use LLM&#39;s semantic hint if provided</span>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>    <span class="k">if</span> <span class="n">prominence_hint</span><span class="p">:</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>            <span class="s2">&quot;central&quot;</span><span class="p">:</span> <span class="s2">&quot;CENTRAL_TO&quot;</span><span class="p">,</span>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>            <span class="s2">&quot;discussed&quot;</span><span class="p">:</span> <span class="s2">&quot;THOROUGHLY_DISCUSSED_IN&quot;</span><span class="p">,</span>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>            <span class="s2">&quot;mentioned&quot;</span><span class="p">:</span> <span class="s2">&quot;MENTIONED_IN&quot;</span><span class="p">,</span>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a>            <span class="s2">&quot;peripheral&quot;</span><span class="p">:</span> <span class="s2">&quot;TANGENTIALLY_REFERENCED_IN&quot;</span>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a>        <span class="p">}</span>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>        <span class="n">hint</span> <span class="o">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">prominence_hint</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="s2">&quot;APPEARS&quot;</span><span class="p">)</span>
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>    <span class="c1"># Priority 2: Infer from structure (always available)</span>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>        <span class="n">hint</span> <span class="o">=</span> <span class="n">infer_from_structure</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">all_instances</span><span class="p">)</span>
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>    <span class="c1"># Normalize to vocabulary cluster (always backend)</span>
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>    <span class="k">return</span> <span class="n">normalize_to_cluster</span><span class="p">(</span><span class="n">hint</span><span class="p">,</span> <span class="s2">&quot;APPEARS&quot;</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.80</span><span class="p">)</span>
</code></pre></div>
<p><strong>Benefits of hybrid:</strong>
- Works with current extraction (no changes required)
- Improves when extraction model enhanced (gradual upgrade)
- LLM never sees vocabulary cluster (maintains simplicity)
- Domain-agnostic (prominence is universal)
- Graceful degradation (structural fallback)</p>
<h3 id="domain-agnostic-examples">Domain-Agnostic Examples</h3>
<p><strong>Technical documentation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>Concept: &quot;dependency injection&quot;
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>Structural signals: 15 mentions, 25% of text  &quot;THOROUGHLY_DISCUSSED_IN&quot;
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>LLM hint: &quot;discussed&quot;  &quot;THOROUGHLY_DISCUSSED_IN&quot;
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>Vocabulary cluster: Normalized, same result
</code></pre></div></p>
<p><strong>Research paper:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>Concept: &quot;Nash equilibrium&quot;
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>Structural signals: 2 mentions, 5% of text  &quot;MENTIONED_IN&quot;
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>LLM hint: &quot;central&quot; (it&#39;s the core theorem)  &quot;CENTRAL_TO&quot;
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>Vocabulary cluster: LLM hint more accurate than structure
</code></pre></div></p>
<p><strong>Code documentation:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>Concept: &quot;Logger interface&quot;
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>Structural signals: 1 mention, early in file  &quot;INTRODUCED_IN&quot;
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>LLM hint: &quot;mentioned&quot; (just referenced, not explained)  &quot;MENTIONED_IN&quot;
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>Vocabulary cluster: LLM provides nuance
</code></pre></div></p>
<p><strong>Legal document:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>Concept: &quot;reasonable doubt&quot;
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>Structural signals: 8 mentions, 18% of text  &quot;FREQUENTLY_MENTIONED_IN&quot;
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>LLM hint: &quot;central&quot; (foundational principle)  &quot;CENTRAL_TO&quot;
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>Vocabulary cluster: LLM understands legal importance
</code></pre></div></p>
<h3 id="open-questions-for-further-discussion">Open Questions for Further Discussion</h3>
<ol>
<li><strong>Should prominence hint be required or optional?</strong></li>
<li>Optional: Graceful degradation, backward compatible</li>
<li>
<p>Required: Better quality, consistent across corpus</p>
</li>
<li>
<p><strong>Are 4 prominence categories sufficient?</strong></p>
</li>
<li>Could add "foundational" vs "derivative"</li>
<li>Could add "predictive" vs "retrospective"</li>
<li>
<p>Risk: More categories = harder for LLM to choose</p>
</li>
<li>
<p><strong>Should we support corpus-specific category extensions?</strong></p>
</li>
<li>User defines custom categories for their domain</li>
<li>Maps to vocabulary cluster via similarity</li>
<li>
<p>Risk: Inconsistency across ontologies</p>
</li>
<li>
<p><strong>How to handle multi-document context?</strong></p>
</li>
<li>Concept "central" to one chapter but "mentioned" in another</li>
<li>Need document-scoped vs corpus-scoped prominence</li>
<li>
<p>Affects relationship granularity</p>
</li>
<li>
<p><strong>Should appearance strength affect grounding calculation?</strong></p>
</li>
<li>Central appearances have more grounding weight?</li>
<li>Peripheral mentions contribute less to truth convergence?</li>
<li>Needs testing with real corpora</li>
</ol>
<h3 id="decision-timeline">Decision Timeline</h3>
<p><strong>Phase 1 (MVP):</strong> Option 1 only (structural inference)
- Validate basic vocabulary clustering works
- Measure structural inference accuracy
- Gather real-world appearance type distribution</p>
<p><strong>Phase 2 (Enhancement):</strong> Add Option 2 (optional prominence)
- Extend extraction prompt with optional field
- Compare LLM vs structural inference accuracy
- Measure impact on semantic query quality</p>
<p><strong>Phase 3 (Evaluation):</strong> Consider Option 4 if needed
- If prominence categories insufficient
- If domain-specific nuance critical
- Only after Option 2 data collection</p>
<hr />
<h2 id="alternatives-considered">Alternatives Considered</h2>
<h3 id="alternative-1-keep-appears-hardcoded-add-properties">Alternative 1: Keep APPEARS Hardcoded, Add Properties</h3>
<p><strong>Approach:</strong> Single APPEARS type, enrich with properties instead of using multiple types.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">MERGE</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="p">:</span><span class="n">APPEARS</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">    </span><span class="n">variant</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CENTRAL_TO&quot;</span><span class="p">,</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="n">confidence</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="p">.</span><span class="m">92</span><span class="p">,</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="n">category</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;thematic&quot;</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="p">}</span><span class="o">]</span><span class="err">-</span><span class="p">&gt;(</span><span class="n">s</span><span class="p">)</span>
</code></pre></div>
<p><strong>Pros:</strong>
- Simpler queries (always match <code>:APPEARS</code>)
- No vocabulary cluster management
- Backward compatible</p>
<p><strong>Cons:</strong>
- Still hardcoded relationship type
- Properties not indexed for similarity search
- Can't use vocabulary consolidation
- Doesn't leverage existing embedding infrastructure
- Asymmetry remains (ConceptConcept uses types, ConceptSource uses properties)</p>
<p><strong>Rejected because:</strong> Doesn't solve architectural inconsistency, misses vocabulary system benefits.</p>
<h3 id="alternative-2-llm-explicit-characterization">Alternative 2: LLM Explicit Characterization</h3>
<p><strong>Approach:</strong> Ask LLM to explicitly characterize appearance during extraction.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>For each concept extracted, classify how it appears in this text:
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>- CENTRAL: Primary theme or subject
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>- DISCUSSED: Explicitly explained or analyzed
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>- MENTIONED: Brief reference or citation
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>- IMPLIED: Indirectly suggested
</code></pre></div>
<p><strong>Pros:</strong>
- LLM understands semantic distinction
- No structural inference needed
- Rich characterization</p>
<p><strong>Cons:</strong>
- Adds complexity to extraction prompt
- Increases LLM API costs (longer prompts)
- Harder to validate/debug
- Requires prompt engineering for each domain</p>
<p><strong>Rejected because:</strong> Adds unnecessary complexity to extraction; structural inference is sufficient and transparent.</p>
<h3 id="alternative-3-post-processing-enrichment">Alternative 3: Post-Processing Enrichment</h3>
<p><strong>Approach:</strong> Create generic APPEARS during ingestion, enrich later via analysis job.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># Ingestion: Simple APPEARS</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="n">MERGE</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[:</span><span class="n">APPEARS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c1"># Later: Enrichment job analyzes and upgrades</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="n">MATCH</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">r</span><span class="p">:</span><span class="n">APPEARS</span><span class="p">]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="n">WITH</span> <span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">analyze_appearance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="k">as</span> <span class="n">variant</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="n">DELETE</span> <span class="n">r</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="n">CREATE</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">new</span><span class="p">:{</span><span class="n">variant</span><span class="p">}]</span><span class="o">-&gt;</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</code></pre></div>
<p><strong>Pros:</strong>
- Doesn't slow down ingestion
- Can re-characterize as models improve
- Separation of concerns</p>
<p><strong>Cons:</strong>
- Two-phase process adds complexity
- Must track enrichment status
- Relationship deletion/recreation risky
- Delayed availability of rich data</p>
<p><strong>Rejected because:</strong> Complexity of two-phase approach outweighs benefits; prefer single-pass enrichment.</p>
<hr />
<h2 id="future-work-epistemic-status-classification">Future Work: Epistemic Status Classification</h2>
<p><strong>Status Update (2025-11-17):</strong>
- <strong>Phase 1 (measurement):</strong>  Complete. Moved to API service (<code>api/api/services/epistemic_status_service.py</code>). See <code>docs/VALIDATION-RESULTS.md</code>. First CONTESTED epistemic status detected (ENABLES: +0.232 avg grounding). CLI: <code>kg vocab epistemic-status measure</code>.
- <strong>Phase 2 (query enhancement):</strong>  Complete. GraphQueryFacade supports optional status filtering via <code>include_epistemic_status</code> and <code>exclude_epistemic_status</code> parameters. Tests: <code>tests/test_query_facade.py::TestEpistemicStatusFiltering</code>.</p>
<h3 id="formal-connections-to-kg-research">Formal Connections to KG Research</h3>
<p>External review (Gemini 2.5) identified that our emergent design maps directly to established KG research:</p>
<table>
<thead>
<tr>
<th>Our System</th>
<th>Formal Research Area</th>
<th>Mapping</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Grounding score</strong></td>
<td>Uncertain/Probabilistic KGs (UKG/PKG)</td>
<td>Confidence measure for fact veracity</td>
</tr>
<tr>
<td><strong>AFFIRMATIVE role</strong></td>
<td>Classification of Uncertainty</td>
<td>High confidence facts (&gt; 0.8)</td>
</tr>
<tr>
<td><strong>CONTESTED role</strong></td>
<td>Classification of Uncertainty</td>
<td>Moderate/disputed confidence (0.2-0.8)</td>
</tr>
<tr>
<td><strong>HISTORICAL role</strong></td>
<td>Temporal Knowledge Graphs (TKG)</td>
<td>Vocabulary evolution tracking</td>
</tr>
<tr>
<td><strong>CONTRADICTORY role</strong></td>
<td>Dialectical Reasoning</td>
<td>Thesis/antithesis preservation</td>
</tr>
</tbody>
</table>
<p><strong>Key insight:</strong> We didn't implement these paradigmswe <strong>derived them from first principles</strong> through successive design decisions.</p>
<h3 id="phased-exploration-non-breaking">Phased Exploration (Non-Breaking)</h3>
<p><strong>Phase 1: Calculate and Store (Read-Only)</strong></p>
<p>Add epistemic status metadata <strong>without changing any core logic</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># NEW: api/api/services/epistemic_status_service.py (replaces operator script)</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="c1"># CLI: kg vocab epistemic-status measure</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">calculate_epistemic_status</span><span class="p">(</span><span class="n">age_client</span><span class="p">):</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="sd">    Calculate epistemic status for each vocabulary type based on grounding impact.</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="sd">    Purely additive - does not change ingestion, grounding, or queries.</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>    <span class="n">vocab_types</span> <span class="o">=</span> <span class="n">age_client</span><span class="o">.</span><span class="n">get_all_vocabulary_types</span><span class="p">()</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>    <span class="k">for</span> <span class="n">vocab_type</span> <span class="ow">in</span> <span class="n">vocab_types</span><span class="p">:</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>        <span class="c1"># Get all edges using this type</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>        <span class="n">edges</span> <span class="o">=</span> <span class="n">age_client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="s2">            MATCH (c1)-[r:</span><span class="si">{</span><span class="n">vocab_type</span><span class="si">}</span><span class="s2">]-&gt;(c2)</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="s2">            RETURN c1.grounding_strength as from_grounding,</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="s2">                   c2.grounding_strength as to_grounding</span>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>        <span class="c1"># Calculate grounding statistics</span>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>        <span class="n">stats</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>            <span class="s1">&#39;avg_grounding&#39;</span><span class="p">:</span> <span class="n">mean</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="s1">&#39;to_grounding&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">]),</span>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>            <span class="s1">&#39;max_grounding&#39;</span><span class="p">:</span> <span class="nb">max</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="s1">&#39;to_grounding&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">]),</span>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>            <span class="s1">&#39;min_grounding&#39;</span><span class="p">:</span> <span class="nb">min</span><span class="p">([</span><span class="n">e</span><span class="p">[</span><span class="s1">&#39;to_grounding&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">]),</span>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>            <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>        <span class="p">}</span>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a>        <span class="c1"># Classify epistemic status</span>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a>        <span class="k">if</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;avg_grounding&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.8</span><span class="p">:</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;AFFIRMATIVE&quot;</span>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a>        <span class="k">elif</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;avg_grounding&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">:</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;CONTRADICTORY&quot;</span>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a>        <span class="k">elif</span> <span class="mf">0.2</span> <span class="o">&lt;=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;avg_grounding&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">0.8</span><span class="p">:</span>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;CONTESTED&quot;</span>
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a>        <span class="k">elif</span> <span class="n">vocab_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;REPLACED_BY&#39;</span><span class="p">,</span> <span class="s1">&#39;SUPERSEDED_BY&#39;</span><span class="p">,</span> <span class="s1">&#39;DEPRECATED&#39;</span><span class="p">]:</span>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;HISTORICAL&quot;</span>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;NEUTRAL&quot;</span>
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a>        <span class="c1"># ADD new properties (non-destructive)</span>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a>        <span class="n">age_client</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="s2">            MATCH (v:VocabType {name: $type})</span>
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="s2">            SET v.epistemic_status = $role,</span>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="s2">                v.epistemic_stats = $stats</span>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a><span class="s2">        &quot;&quot;&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">vocab_type</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="n">role</span><span class="p">,</span> <span class="s2">&quot;stats&quot;</span><span class="p">:</span> <span class="n">stats</span><span class="p">})</span>
</code></pre></div>
<p><strong>Result:</strong> Core system unchanged, new metadata available for exploration.</p>
<p><strong>Phase 2: Enhance Querying (Additive Logic)</strong></p>
<p>Extend GraphQueryFacade with <strong>optional</strong> epistemic status filtering:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># api/api/lib/query_facade.py</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">GraphQueryFacade</span><span class="p">:</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">match_concept_relationships</span><span class="p">(</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>        <span class="n">concept_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a>        <span class="n">include_roles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># NEW</span>
<a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a>        <span class="n">exclude_roles</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>   <span class="c1"># NEW</span>
<a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a>    <span class="p">):</span>
<a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a><span class="sd">        Match relationships with optional epistemic status filtering.</span>
<a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a>
<a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="sd">        Args:</span>
<a id="__codelineno-34-14" name="__codelineno-34-14" href="#__codelineno-34-14"></a><span class="sd">            include_roles: Only include these roles (e.g., [&quot;AFFIRMATIVE&quot;])</span>
<a id="__codelineno-34-15" name="__codelineno-34-15" href="#__codelineno-34-15"></a><span class="sd">            exclude_roles: Exclude these roles (e.g., [&quot;HISTORICAL&quot;])</span>
<a id="__codelineno-34-16" name="__codelineno-34-16" href="#__codelineno-34-16"></a>
<a id="__codelineno-34-17" name="__codelineno-34-17" href="#__codelineno-34-17"></a><span class="sd">        Backward compatible: If both None, behaves exactly as before.</span>
<a id="__codelineno-34-18" name="__codelineno-34-18" href="#__codelineno-34-18"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-34-19" name="__codelineno-34-19" href="#__codelineno-34-19"></a>        <span class="c1"># Get vocabulary types matching role filters</span>
<a id="__codelineno-34-20" name="__codelineno-34-20" href="#__codelineno-34-20"></a>        <span class="k">if</span> <span class="n">include_roles</span> <span class="ow">or</span> <span class="n">exclude_roles</span><span class="p">:</span>
<a id="__codelineno-34-21" name="__codelineno-34-21" href="#__codelineno-34-21"></a>            <span class="n">role_filter</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-34-22" name="__codelineno-34-22" href="#__codelineno-34-22"></a>            <span class="k">if</span> <span class="n">include_roles</span><span class="p">:</span>
<a id="__codelineno-34-23" name="__codelineno-34-23" href="#__codelineno-34-23"></a>                <span class="n">role_filter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;v.epistemic_status IN </span><span class="si">{</span><span class="n">include_roles</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-34-24" name="__codelineno-34-24" href="#__codelineno-34-24"></a>            <span class="k">if</span> <span class="n">exclude_roles</span><span class="p">:</span>
<a id="__codelineno-34-25" name="__codelineno-34-25" href="#__codelineno-34-25"></a>                <span class="n">role_filter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;v.epistemic_status NOT IN </span><span class="si">{</span><span class="n">exclude_roles</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-34-26" name="__codelineno-34-26" href="#__codelineno-34-26"></a>
<a id="__codelineno-34-27" name="__codelineno-34-27" href="#__codelineno-34-27"></a>            <span class="n">vocab_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-34-28" name="__codelineno-34-28" href="#__codelineno-34-28"></a><span class="s2">                MATCH (v:VocabType)</span>
<a id="__codelineno-34-29" name="__codelineno-34-29" href="#__codelineno-34-29"></a><span class="s2">                WHERE </span><span class="si">{</span><span class="s1">&#39; AND &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">role_filter</span><span class="p">)</span><span class="si">}</span>
<a id="__codelineno-34-30" name="__codelineno-34-30" href="#__codelineno-34-30"></a><span class="s2">                RETURN v.name as type_name</span>
<a id="__codelineno-34-31" name="__codelineno-34-31" href="#__codelineno-34-31"></a><span class="s2">            &quot;&quot;&quot;</span>
<a id="__codelineno-34-32" name="__codelineno-34-32" href="#__codelineno-34-32"></a>            <span class="n">allowed_types</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;type_name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">vocab_query</span><span class="p">)]</span>
<a id="__codelineno-34-33" name="__codelineno-34-33" href="#__codelineno-34-33"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-34-34" name="__codelineno-34-34" href="#__codelineno-34-34"></a>            <span class="n">allowed_types</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># No filtering, use all types</span>
<a id="__codelineno-34-35" name="__codelineno-34-35" href="#__codelineno-34-35"></a>
<a id="__codelineno-34-36" name="__codelineno-34-36" href="#__codelineno-34-36"></a>        <span class="c1"># Build main query (existing logic + optional type filter)</span>
<a id="__codelineno-34-37" name="__codelineno-34-37" href="#__codelineno-34-37"></a>        <span class="n">type_pattern</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;:</span><span class="si">{</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_types</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">allowed_types</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-34-38" name="__codelineno-34-38" href="#__codelineno-34-38"></a>
<a id="__codelineno-34-39" name="__codelineno-34-39" href="#__codelineno-34-39"></a>        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-34-40" name="__codelineno-34-40" href="#__codelineno-34-40"></a><span class="s2">            MATCH (c:Concept </span><span class="se">{{</span><span class="s2">concept_id: $concept_id</span><span class="se">}}</span><span class="s2">)-[r</span><span class="si">{</span><span class="n">type_pattern</span><span class="si">}</span><span class="s2">]-&gt;(c2)</span>
<a id="__codelineno-34-41" name="__codelineno-34-41" href="#__codelineno-34-41"></a><span class="s2">            RETURN c2, type(r), r.confidence</span>
<a id="__codelineno-34-42" name="__codelineno-34-42" href="#__codelineno-34-42"></a><span class="s2">        &quot;&quot;&quot;</span>
<a id="__codelineno-34-43" name="__codelineno-34-43" href="#__codelineno-34-43"></a>
<a id="__codelineno-34-44" name="__codelineno-34-44" href="#__codelineno-34-44"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;concept_id&quot;</span><span class="p">:</span> <span class="n">concept_id</span><span class="p">})</span>
</code></pre></div>
<p><strong>New capabilities enabled:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1"># Explore only high-confidence relationships (thesis)</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">facade</span><span class="o">.</span><span class="n">match_concept_relationships</span><span class="p">(</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>    <span class="n">concept_id</span><span class="o">=</span><span class="s2">&quot;covenant_name&quot;</span><span class="p">,</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>    <span class="n">include_roles</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;AFFIRMATIVE&quot;</span><span class="p">]</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="p">)</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="c1"># Explore contradictions (antithesis)</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="n">facade</span><span class="o">.</span><span class="n">match_concept_relationships</span><span class="p">(</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>    <span class="n">concept_id</span><span class="o">=</span><span class="s2">&quot;covenant_name&quot;</span><span class="p">,</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>    <span class="n">include_roles</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;CONTRADICTORY&quot;</span><span class="p">,</span> <span class="s2">&quot;CONTESTED&quot;</span><span class="p">]</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="p">)</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="c1"># Exclude historical relationships (current state only)</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="n">facade</span><span class="o">.</span><span class="n">match_concept_relationships</span><span class="p">(</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a>    <span class="n">concept_id</span><span class="o">=</span><span class="s2">&quot;covenant_name&quot;</span><span class="p">,</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a>    <span class="n">exclude_roles</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;HISTORICAL&quot;</span><span class="p">]</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="p">)</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="c1"># Default behavior unchanged (backward compatible)</span>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="n">facade</span><span class="o">.</span><span class="n">match_concept_relationships</span><span class="p">(</span><span class="n">concept_id</span><span class="o">=</span><span class="s2">&quot;covenant_name&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Phase 3: Integration (Only After Validation)</strong></p>
<p>Only if Phase 1-2 prove valuable:
- Add epistemic status to pruning logic (preserve dialectical tension)
- Add temporal queries (point-in-time semantic state)
- Integrate role-aware grounding (dialectical synthesis)</p>
<h3 id="benefits-of-phased-approach">Benefits of Phased Approach</h3>
<p><strong>Safety:</strong>
- Phase 1: Zero risk (read-only metadata)
- Phase 2: Backward compatible (optional parameters)
- Phase 3: Informed decision (validated with real data)</p>
<p><strong>Reversibility:</strong>
- Git revert if exploration fails
- No breaking changes until Phase 3
- Can explore indefinitely in safe mode</p>
<p><strong>Learning:</strong>
- Validate formal KG paradigms against our data
- Understand grounding distribution across roles
- Discover dialectical patterns in corpus</p>
<h3 id="implementation-plan">Implementation Plan</h3>
<p><strong>Week 1: Phase 1 (Calculation Service)</strong>  Complete
- Create <code>api/api/services/epistemic_status_service.py</code>
- Integrate with API endpoints
- CLI interface: <code>kg vocab epistemic-status measure</code>
- Run on existing vocabulary and analyze distribution</p>
<p><strong>Week 2: Phase 2 (Query Enhancement)</strong>
- Extend GraphQueryFacade
- Add CLI flags (e.g., <code>kg search --role AFFIRMATIVE</code>)
- Test dialectical queries
- Measure semantic value</p>
<p><strong>Week 3+: Evaluation</strong>
- Use cases: Dialectical reasoning, temporal queries, uncertainty visualization
- Decision: Proceed to Phase 3 or keep as optional feature</p>
<hr />
<h2 id="related">Related</h2>
<ul>
<li><strong>ADR-058:</strong> Polarity Axis Triangulation for Grounding Calculation (pattern we're replicating)</li>
<li><strong>ADR-048:</strong> Query Safety via GraphQueryFacade (abstraction layer for vocabulary complexity)</li>
<li><strong>ADR-052:</strong> Vocabulary Expansion-Consolidation Cycle (applies to appearance types)</li>
<li><strong>Issue #134:</strong> APPEARS_IN vs APPEARS naming bug (prerequisite fix)</li>
</ul>
<hr />
<h2 id="references">References</h2>
<ul>
<li>Vocabulary consolidation: ADR-052</li>
<li>Relationship mapper: <code>api/api/lib/relationship_mapper.py</code></li>
<li>Polarity axis: <code>api/api/lib/age_client.py:_compute_polarity_axis()</code></li>
<li>Query facade: <code>api/api/lib/query_facade.py</code></li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>