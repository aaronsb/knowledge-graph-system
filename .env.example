# ============================================================================
# Knowledge Graph System - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# AI Provider Configuration
# ----------------------------------------------------------------------------
# AI provider to use: "openai" or "anthropic" (default: openai)
AI_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=your-openai-key-here
# Optional: Override default models
# OPENAI_EXTRACTION_MODEL=gpt-4o                    # Options: gpt-4o, gpt-4o-mini, o1-preview, o1-mini
# OPENAI_EMBEDDING_MODEL=text-embedding-3-small     # Options: text-embedding-3-small, text-embedding-3-large

# Anthropic Configuration (optional - only needed if AI_PROVIDER=anthropic)
# ANTHROPIC_API_KEY=your-anthropic-key-here
# ANTHROPIC_EXTRACTION_MODEL=claude-sonnet-4-20250514  # Options: claude-sonnet-4-20250514, claude-3-opus-20240229
# Note: Anthropic uses OpenAI for embeddings, so OPENAI_API_KEY is still required

# Mock Provider Configuration (for testing - no API keys required)
# Set AI_PROVIDER=mock to use deterministic mock responses
# Useful for: unit tests, integration tests, development without LLM API costs
# MOCK_MODE=default  # Options: default, simple (minimal concepts), complex (rich graph), empty (no concepts)

# ----------------------------------------------------------------------------
# PostgreSQL + Apache AGE Database Configuration
# ----------------------------------------------------------------------------
# PostgreSQL connection details
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=knowledge_graph
POSTGRES_USER=admin
POSTGRES_PASSWORD=password

# Optional: PostgreSQL performance tuning (for docker-compose.yml)
# POSTGRES_SHARED_BUFFERS=512MB
# POSTGRES_WORK_MEM=64MB
# POSTGRES_MAINTENANCE_WORK_MEM=256MB
# POSTGRES_MAX_PARALLEL_WORKERS=4

# ----------------------------------------------------------------------------
# Token Cost Configuration (USD per 1M tokens)
# ----------------------------------------------------------------------------
# Used for cost estimation in ingestion summary
# Update these when pricing changes

# OpenAI Extraction Models (average of input/output for mixed workloads)
TOKEN_COST_GPT4O=6.25              # GPT-4o: $2.50 input + $10.00 output avg
TOKEN_COST_GPT4O_MINI=0.375        # GPT-4o-mini: $0.15 input + $0.60 output avg
TOKEN_COST_O1_PREVIEW=30.00        # o1-preview: $15 input + $60 output avg
TOKEN_COST_O1_MINI=5.50            # o1-mini: $3 input + $12 output avg

# Anthropic Extraction Models (average of input/output)
TOKEN_COST_CLAUDE_SONNET_4=9.00    # Claude Sonnet 4: $3 input + $15 output avg

# OpenAI Embedding Models
TOKEN_COST_EMBEDDING_SMALL=0.02    # text-embedding-3-small
TOKEN_COST_EMBEDDING_LARGE=0.13    # text-embedding-3-large

# ----------------------------------------------------------------------------
# API Server Configuration (Phase 1)
# ----------------------------------------------------------------------------
# Job queue database path
JOB_DB_PATH=data/jobs.db

# Queue type: "inmemory" (Phase 1) or "redis" (Phase 2)
QUEUE_TYPE=inmemory

# ----------------------------------------------------------------------------
# Job Scheduler Configuration (ADR-014)
# ----------------------------------------------------------------------------
# How often to run cleanup tasks (in seconds, default: 3600 = 1 hour)
JOB_CLEANUP_INTERVAL=3600

# Cancel unapproved jobs after this many hours (default: 24)
JOB_APPROVAL_TIMEOUT=24

# Delete completed/cancelled jobs after this many hours (default: 48)
JOB_COMPLETED_RETENTION=48

# Delete failed jobs after this many hours (default: 168 = 7 days)
JOB_FAILED_RETENTION=168

# ----------------------------------------------------------------------------
# Authentication (Phase 2 - Placeholder in Phase 1)
# ----------------------------------------------------------------------------
# Enable authentication (default: false in Phase 1)
AUTH_ENABLED=false

# Require X-Client-ID header for all requests
AUTH_REQUIRE_CLIENT_ID=false

# Valid API keys (comma-separated, for Phase 2)
# AUTH_API_KEYS=key1,key2,key3

# ----------------------------------------------------------------------------
# Optional: Advanced Configuration
# ----------------------------------------------------------------------------
# Uncomment and configure as needed

# Embedding model configuration
# EMBEDDING_MODEL=text-embedding-3-small
# EMBEDDING_DIMENSIONS=1536

# LLM model configuration
# LLM_MODEL=claude-3-5-sonnet-20241022

# Logging level (DEBUG, INFO, WARNING, ERROR)
# LOG_LEVEL=INFO
